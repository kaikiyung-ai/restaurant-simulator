<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸœ Restaurant Profit Simulator â€” Porter's Five Forces</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=DM+Mono:wght@400;500&display=swap');

:root{
  --bg:#fff8f0;
  --panel:#ffffff;
  --orange:#f97316;
  --orange-light:#fed7aa;
  --orange-mid:#fdba74;
  --orange-dark:#ea580c;
  --peach:#fff1e6;
  --yellow:#fef08a;
  --yellow-dark:#ca8a04;
  --green:#86efac;
  --green-dark:#16a34a;
  --red:#fca5a5;
  --red-dark:#dc2626;
  --ink:#431a00;
  --muted:#92614a;
  --border:#f5d0a9;
  --white:#ffffff;
  --shadow:0 4px 16px rgba(249,115,22,.13);
  --shadow-sm:0 2px 8px rgba(249,115,22,.1);
  --radius:16px;
  --radius-sm:10px;
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Nunito',sans-serif;background:var(--bg);color:var(--ink);min-height:100vh;font-size:14px;line-height:1.65}

/* deco background dots */
body::before{
  content:'';position:fixed;inset:0;
  background-image:radial-gradient(circle,#f9731620 1.5px,transparent 1.5px);
  background-size:28px 28px;
  pointer-events:none;z-index:0;
}

.app{display:grid;grid-template-rows:auto 1fr;min-height:100vh;position:relative;z-index:1}

/* â”€â”€ TOPBAR â”€â”€ */
.topbar{
  background:linear-gradient(135deg,var(--orange-dark) 0%,var(--orange) 60%,#fb923c 100%);
  color:#fff;
  padding:10px 20px;
  display:flex;align-items:center;justify-content:space-between;
  position:sticky;top:0;z-index:100;
  box-shadow:0 4px 20px rgba(234,88,12,.35);
}
.topbar-left{display:flex;align-items:center;gap:12px}
.topbar-icon{font-size:28px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2));animation:wobble 3s ease-in-out infinite}
@keyframes wobble{0%,100%{transform:rotate(-5deg)}50%{transform:rotate(5deg)}}
.topbar-title{font-size:18px;font-weight:900;letter-spacing:.2px;text-shadow:0 1px 3px rgba(0,0,0,.2)}
.topbar-sub{font-size:10px;opacity:.85;font-weight:600;letter-spacing:.5px}
.topbar-right{display:flex;align-items:center;gap:10px}

/* lang toggle */
.lang-toggle{
  display:flex;background:rgba(255,255,255,.2);border-radius:20px;padding:3px;gap:2px;
}
.lang-btn{
  padding:4px 11px;border-radius:16px;border:none;cursor:pointer;
  font-family:'Nunito',sans-serif;font-size:11px;font-weight:700;
  background:transparent;color:rgba(255,255,255,.8);transition:all .2s;letter-spacing:.3px;
}
.lang-btn.active{background:#fff;color:var(--orange-dark);box-shadow:0 1px 4px rgba(0,0,0,.15)}

.score-badge{
  background:rgba(255,255,255,.22);border:2px solid rgba(255,255,255,.5);
  color:#fff;padding:5px 14px;border-radius:20px;
  font-family:'DM Mono',monospace;font-size:12px;font-weight:500;
  cursor:pointer;transition:all .2s;letter-spacing:.5px;
  backdrop-filter:blur(4px);
}
.score-badge:hover{background:rgba(255,255,255,.35)}

/* â”€â”€ LAYOUT â”€â”€ */
.main-content{display:grid;grid-template-columns:310px 1fr;height:calc(100vh - 54px);overflow:hidden}

/* â”€â”€ LEFT PANEL â”€â”€ */
.left-panel{
  background:var(--panel);
  border-right:2px solid var(--border);
  overflow-y:auto;display:flex;flex-direction:column;
  box-shadow:2px 0 12px rgba(249,115,22,.08);
}
.panel-header{
  padding:16px 18px 12px;
  background:linear-gradient(160deg,#fff8f0,#fff1e6);
  border-bottom:2px solid var(--border);
  display:flex;align-items:center;gap:10px;
}
.panel-header-icon{font-size:22px}
.panel-title{font-size:15px;font-weight:900;color:var(--ink)}
.panel-desc{font-size:10px;color:var(--muted);font-weight:600}

.section{padding:14px 16px;border-bottom:2px dashed var(--border)}
.section-label{
  font-size:10px;font-weight:800;color:var(--orange-dark);
  letter-spacing:1.5px;text-transform:uppercase;margin-bottom:8px;
  display:flex;align-items:center;gap:5px;
}
.option-group{display:flex;flex-direction:column;gap:5px}
.option-btn{
  width:100%;text-align:left;padding:8px 12px;
  border:2px solid var(--border);background:var(--peach);
  color:var(--ink);cursor:pointer;
  font-family:'Nunito',sans-serif;font-size:12px;font-weight:700;
  border-radius:var(--radius-sm);transition:all .18s;position:relative;
}
.option-btn:hover{border-color:var(--orange-mid);background:#fff3e8;transform:translateX(2px)}
.option-btn.active{
  border-color:var(--orange);background:linear-gradient(135deg,var(--orange),var(--orange-dark));
  color:#fff;transform:translateX(2px);
  box-shadow:0 3px 10px rgba(249,115,22,.35);
}
.option-btn.active::after{content:'âœ“';position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:13px}

/* cost bars */
.cost-row{display:flex;align-items:center;gap:6px;margin-bottom:4px}
.cost-icon{font-size:13px}
.cost-label{font-size:11px;color:var(--ink);font-weight:700;flex:1}
.cost-val{font-family:'DM Mono',monospace;font-size:11px;color:var(--orange-dark);width:32px;text-align:right;font-weight:500}
.cost-bar{width:100%;height:6px;background:var(--border);border-radius:4px;margin-bottom:10px;overflow:hidden}
.cost-fill{height:100%;border-radius:4px;background:linear-gradient(90deg,var(--orange-mid),var(--orange));transition:width .4s cubic-bezier(.34,1.56,.64,1)}

/* score summary */
.score-summary{
  padding:16px;
  background:linear-gradient(160deg,var(--orange-dark),var(--orange) 70%,#fb923c);
  color:#fff;flex:1;
}
.score-main-label{font-size:9px;font-weight:800;color:rgba(255,255,255,.75);letter-spacing:2px;text-transform:uppercase;margin-bottom:8px}
.score-big{font-size:54px;font-weight:900;line-height:1;color:#fff;transition:color .3s;text-shadow:0 2px 8px rgba(0,0,0,.2)}
.score-verdict{font-size:11px;margin-top:4px;color:rgba(255,255,255,.9);font-weight:700}
.five-force-scores{margin-top:14px;display:flex;flex-direction:column;gap:7px}
.ff-row{display:flex;align-items:center;gap:7px;cursor:pointer;padding:5px 6px;border-radius:8px;transition:background .15s}
.ff-row:hover{background:rgba(255,255,255,.12)}
.ff-emoji{font-size:13px;width:18px}
.ff-label{font-size:10px;flex:1;color:rgba(255,255,255,.88);font-weight:700}
.ff-bar-bg{width:68px;height:5px;background:rgba(255,255,255,.2);border-radius:3px}
.ff-bar-fill{height:100%;border-radius:3px;transition:width .4s}
.ff-num{font-family:'DM Mono',monospace;font-size:10px;color:#fff;width:24px;text-align:right;font-weight:500}

/* â”€â”€ FOOD DECO STRIP â”€â”€ */
.food-strip{
  padding:6px 16px;
  background:linear-gradient(90deg,var(--orange-light),var(--yellow),var(--orange-light));
  border-bottom:2px solid var(--border);
  display:flex;align-items:center;justify-content:center;gap:12px;
  font-size:18px;letter-spacing:2px;
}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}
.food-strip span{display:inline-block;animation:float 2s ease-in-out infinite}
.food-strip span:nth-child(2){animation-delay:.2s}
.food-strip span:nth-child(3){animation-delay:.4s}
.food-strip span:nth-child(4){animation-delay:.6s}
.food-strip span:nth-child(5){animation-delay:.8s}
.food-strip span:nth-child(6){animation-delay:1s}
.food-strip span:nth-child(7){animation-delay:1.2s}

/* â”€â”€ RIGHT PANEL â”€â”€ */
.right-panel{display:flex;flex-direction:column;overflow:hidden}
.tab-bar{display:flex;background:var(--panel);border-bottom:2px solid var(--border);overflow-x:auto;gap:2px;padding:0 8px}
.tab-btn{
  padding:10px 13px;border:none;background:none;cursor:pointer;
  font-family:'Nunito',sans-serif;font-size:12px;font-weight:700;
  color:var(--muted);border-bottom:3px solid transparent;
  white-space:nowrap;transition:all .15s;border-radius:8px 8px 0 0;margin-top:4px;
}
.tab-btn:hover{color:var(--orange-dark);background:var(--peach)}
.tab-btn.active{color:var(--orange-dark);border-bottom-color:var(--orange);background:var(--peach)}

.tab-content{flex:1;overflow-y:auto;padding:20px 22px;background:var(--bg);display:none;flex-direction:column;gap:0}
.tab-content.active{display:flex}

/* force header */
.force-header{
  display:flex;align-items:flex-start;justify-content:space-between;
  margin-bottom:16px;padding-bottom:14px;border-bottom:2px dashed var(--border);
}
.force-title-wrap{display:flex;align-items:center;gap:10px}
.force-emoji{font-size:30px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}
.force-name{font-size:20px;font-weight:900;color:var(--ink)}
.force-sub{font-size:11px;color:var(--muted);font-weight:600;margin-top:2px}

.intensity-badge{
  padding:5px 13px;border-radius:20px;
  font-family:'DM Mono',monospace;font-size:10px;font-weight:500;letter-spacing:1px;
}
.intensity-high{background:#fee2e2;color:#b91c1c;border:2px solid #fca5a5}
.intensity-medium{background:#fef9c3;color:#a16207;border:2px solid #fde68a}
.intensity-low{background:#dcfce7;color:#15803d;border:2px solid #86efac}

/* data cards */
.data-cards{display:grid;gap:10px}
.data-card{
  background:var(--panel);border:2px solid var(--border);
  border-radius:var(--radius);padding:13px 15px;
  box-shadow:var(--shadow-sm);transition:transform .15s,box-shadow .15s;
}
.data-card:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
.data-card-label{
  font-size:9px;font-weight:800;color:var(--orange);
  letter-spacing:1.5px;text-transform:uppercase;margin-bottom:5px;
  display:flex;align-items:center;gap:4px;
}
.data-card-value{font-size:14px;font-weight:800;color:var(--ink);line-height:1.35}
.data-card-note{font-size:11px;color:var(--muted);margin-top:4px;font-weight:600;line-height:1.45}
.data-source{
  font-family:'DM Mono',monospace;font-size:8.5px;color:var(--muted);
  margin-top:6px;padding-top:6px;border-top:1.5px dashed var(--border);
}
.adapt-tag{
  display:inline-flex;align-items:center;gap:4px;
  background:linear-gradient(135deg,var(--orange-light),var(--yellow));
  border:2px solid var(--orange-mid);color:var(--orange-dark);
  font-size:9px;font-weight:800;padding:3px 8px;border-radius:20px;
  letter-spacing:.5px;margin-bottom:6px;text-transform:uppercase;
}

/* scoring */
.scoring-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px}
.score-card{
  background:var(--panel);border:2px solid var(--border);
  border-radius:var(--radius);padding:14px;cursor:pointer;
  transition:all .18s;box-shadow:var(--shadow-sm);
}
.score-card:hover{border-color:var(--orange-mid);transform:translateY(-2px);box-shadow:var(--shadow)}
.score-card-icon{font-size:22px;margin-bottom:6px}
.score-card-label{font-size:11px;color:var(--muted);margin-bottom:6px;font-weight:700}
.score-card-num{font-size:36px;font-weight:900;line-height:1}
.score-card-weight{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:3px}
.score-card-basis{font-size:10px;color:var(--muted);margin-top:7px;font-weight:600;line-height:1.4}

/* feedback */
.feedback-box{border-radius:var(--radius);padding:16px 18px;margin-bottom:14px;border:2px solid}
.feedback-high{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-color:var(--green)}
.feedback-medium{background:linear-gradient(135deg,#fefce8,#fef9c3);border-color:#fde68a}
.feedback-low{background:linear-gradient(135deg,#fff1f2,#fee2e2);border-color:var(--red)}
.feedback-title{font-size:16px;font-weight:900;margin-bottom:7px;display:flex;align-items:center;gap:8px}
.feedback-body{font-size:12px;line-height:1.6;font-weight:600}
.feedback-source{font-family:'DM Mono',monospace;font-size:8.5px;color:var(--muted);margin-top:8px}

/* socratic */
.socratic-box{
  background:linear-gradient(135deg,var(--orange-dark),var(--orange) 80%);
  color:#fff;border-radius:var(--radius);padding:16px 18px;margin-top:12px;
  box-shadow:var(--shadow);
}
.socratic-label{font-size:9px;font-weight:800;color:rgba(255,255,255,.8);letter-spacing:2px;text-transform:uppercase;margin-bottom:8px;display:flex;align-items:center;gap:5px}
.socratic-q{font-size:12px;line-height:1.65;color:#fff;margin-bottom:12px;font-weight:600}
.socratic-input{
  width:100%;background:rgba(255,255,255,.15);border:2px solid rgba(255,255,255,.3);
  color:#fff;padding:9px 12px;font-family:'Nunito',sans-serif;font-size:12px;font-weight:600;
  border-radius:10px;resize:vertical;min-height:55px;
}
.socratic-input::placeholder{color:rgba(255,255,255,.6)}
.socratic-input:focus{outline:none;border-color:rgba(255,255,255,.7)}
.socratic-submit{
  margin-top:7px;background:#fff;color:var(--orange-dark);border:none;
  padding:8px 18px;font-family:'Nunito',sans-serif;font-size:12px;cursor:pointer;
  border-radius:20px;font-weight:800;transition:all .2s;box-shadow:0 2px 8px rgba(0,0,0,.15);
}
.socratic-submit:hover{transform:scale(1.04);box-shadow:0 4px 12px rgba(0,0,0,.2)}
.socratic-response{
  margin-top:10px;padding:12px;background:rgba(255,255,255,.12);
  border-left:3px solid rgba(255,255,255,.6);border-radius:0 8px 8px 0;
  font-size:12px;line-height:1.6;display:none;font-weight:600;
}

/* report */
.report-section{margin-bottom:22px}
.report-section-title{
  font-size:10px;font-weight:800;color:var(--orange-dark);
  letter-spacing:2px;text-transform:uppercase;margin-bottom:10px;
  padding-bottom:6px;border-bottom:2px dashed var(--border);
  display:flex;align-items:center;gap:6px;
}
.report-table{width:100%;border-collapse:collapse;font-size:11px;background:var(--panel);border-radius:12px;overflow:hidden;box-shadow:var(--shadow-sm)}
.report-table th{background:linear-gradient(135deg,var(--orange-dark),var(--orange));color:#fff;padding:8px 10px;text-align:left;font-size:9px;font-weight:800;letter-spacing:1px;text-transform:uppercase}
.report-table td{padding:8px 10px;border-bottom:1.5px solid var(--border);vertical-align:top;font-weight:600}
.report-table tr:last-child td{border-bottom:none}
.report-table tr:hover td{background:var(--peach)}
.generate-btn{
  background:linear-gradient(135deg,var(--orange-dark),var(--orange));
  color:#fff;border:none;padding:11px 24px;
  font-family:'Nunito',sans-serif;font-size:13px;cursor:pointer;
  border-radius:24px;font-weight:800;letter-spacing:.3px;
  transition:all .2s;box-shadow:0 4px 14px rgba(249,115,22,.4);
  display:flex;align-items:center;gap:6px;
}
.generate-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(249,115,22,.5)}
.hal-log{margin-top:14px}
.hal-entry{
  background:var(--panel);border:2px solid var(--border);
  border-left:4px solid var(--orange);padding:10px 13px;
  margin-bottom:8px;border-radius:var(--radius-sm);
  box-shadow:var(--shadow-sm);
}
.hal-entry-label{font-size:9px;font-weight:800;color:var(--orange-dark);letter-spacing:1px;margin-bottom:3px;text-transform:uppercase}
.hal-entry-text{font-size:11px;line-height:1.5;font-weight:600}

/* modal */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(67,26,0,.6);z-index:200;align-items:center;justify-content:center;backdrop-filter:blur(3px)}
.modal-overlay.open{display:flex}
.modal{
  background:var(--panel);border-radius:var(--radius);padding:24px;
  max-width:520px;width:90%;max-height:80vh;overflow-y:auto;
  box-shadow:0 20px 60px rgba(0,0,0,.25);
}
.modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;padding-bottom:10px;border-bottom:2px dashed var(--border)}
.modal-title{font-size:17px;font-weight:900;color:var(--ink)}
.modal-close{background:var(--peach);border:2px solid var(--border);width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;color:var(--muted);font-weight:800;transition:all .15s}
.modal-close:hover{background:var(--orange-light);color:var(--orange-dark)}
.modal-body{font-size:12px;line-height:1.7}
.modal-body dt{font-weight:800;color:var(--orange-dark);margin-top:10px}
.modal-body dd{margin-left:10px;color:var(--muted);font-size:11px;line-height:1.6;font-weight:600}

/* notices */
.data-notice{
  background:linear-gradient(135deg,#fef9c3,#fefce8);border:2px solid #fde68a;
  border-radius:var(--radius-sm);padding:9px 13px;font-size:10px;color:#854d0e;
  margin-bottom:14px;font-weight:700;display:flex;align-items:flex-start;gap:6px;
}
.tag-unavail{
  font-family:'DM Mono',monospace;font-size:9px;
  background:#fee2e2;color:#dc2626;padding:1px 6px;border-radius:4px;font-weight:500;
}

/* scrollbar */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--border);border-radius:4px}
::-webkit-scrollbar-thumb{background:var(--orange-mid);border-radius:4px}

/* animations */
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.updating{animation:pulse .35s}
@keyframes popIn{0%{transform:scale(.9);opacity:0}100%{transform:scale(1);opacity:1}}
.score-card{animation:popIn .25s ease-out}

/* cartoon restaurant SVG strip */
.cartoon-strip{
  background:linear-gradient(90deg,var(--peach),#fff8e1,var(--peach));
  border-bottom:2px solid var(--border);
  padding:8px 0;overflow:hidden;white-space:nowrap;
}
.cartoon-inner{
  display:inline-flex;align-items:center;gap:0;
  animation:marquee 22s linear infinite;
}
@keyframes marquee{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
</style>
</head>
<body>
<div class="app">

<!-- TOPBAR -->
<div class="topbar">
  <div class="topbar-left">
    <div class="topbar-icon">ğŸ³</div>
    <div>
      <div class="topbar-title" id="t-title">Restaurant Profit Simulator</div>
      <div class="topbar-sub" id="t-sub">Porter's Five Forces Â· HK F&amp;B 2024â€“2026</div>
    </div>
  </div>
  <div class="topbar-right">
    <div class="lang-toggle">
      <button class="lang-btn active" id="btn-en" onclick="setLang('en')">EN</button>
      <button class="lang-btn" id="btn-zh" onclick="setLang('zh')">ä¸­æ–‡</button>
    </div>
    <div id="topScoreBadge" class="score-badge" onclick="switchTab('scoring')">Score â€”</div>
  </div>
</div>

<!-- CARTOON FOOD MARQUEE -->
<div class="cartoon-strip">
  <div class="cartoon-inner">
    <!-- repeated twice for seamless loop -->
    <svg width="1400" height="48" viewBox="0 0 1400 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Ramen bowl -->
      <ellipse cx="50" cy="34" rx="20" ry="8" fill="#f97316" opacity=".9"/>
      <ellipse cx="50" cy="30" rx="20" ry="8" fill="#fb923c"/>
      <path d="M30 30 Q50 20 70 30" fill="#fef3c7"/>
      <circle cx="42" cy="27" r="3" fill="#f97316"/>
      <circle cx="52" cy="25" r="2.5" fill="#dc2626"/>
      <circle cx="61" cy="27" r="2" fill="#16a34a"/>
      <!-- Steam -->
      <path d="M42 18 Q40 12 42 8" stroke="#fdba74" stroke-width="1.5" stroke-linecap="round" fill="none"/>
      <path d="M50 16 Q48 10 50 6" stroke="#fdba74" stroke-width="1.5" stroke-linecap="round" fill="none"/>
      <path d="M58 18 Q56 12 58 8" stroke="#fdba74" stroke-width="1.5" stroke-linecap="round" fill="none"/>
      <!-- Sushi -->
      <rect x="100" y="22" width="18" height="14" rx="5" fill="#f5f5f5" stroke="#e5e7eb" stroke-width="1"/>
      <ellipse cx="109" cy="22" rx="9" ry="5" fill="#fed7aa"/>
      <ellipse cx="109" cy="21" rx="6" ry="3.5" fill="#dc2626" opacity=".8"/>
      <rect x="106" y="20" width="6" height="3" rx="1.5" fill="#16a34a" opacity=".7"/>
      <!-- Dim sum basket -->
      <ellipse cx="165" cy="36" rx="17" ry="6" fill="#c2410c" opacity=".5"/>
      <rect x="148" y="22" width="34" height="16" rx="6" fill="#fed7aa" stroke="#f97316" stroke-width="1.5"/>
      <ellipse cx="165" cy="22" rx="17" ry="6" fill="#fef3c7" stroke="#f97316" stroke-width="1.5"/>
      <circle cx="157" cy="28" r="4" fill="#fff" stroke="#fdba74" stroke-width="1"/>
      <circle cx="165" cy="26" r="4" fill="#fff" stroke="#fdba74" stroke-width="1"/>
      <circle cx="173" cy="28" r="4" fill="#fff" stroke="#fdba74" stroke-width="1"/>
      <!-- Noodles fork -->
      <rect x="212" y="10" width="4" height="30" rx="2" fill="#f97316"/>
      <path d="M210 10 L210 20 M214 10 L214 20 M218 10 L218 20" stroke="#f97316" stroke-width="1.5" stroke-linecap="round"/>
      <!-- Dumplings -->
      <ellipse cx="260" cy="34" rx="22" ry="7" fill="#fdba74" opacity=".5"/>
      <path d="M238 28 Q248 16 260 20 Q272 16 282 28 Q272 36 260 34 Q248 36 238 28Z" fill="#fef9c3" stroke="#f97316" stroke-width="1.5"/>
      <path d="M250 24 Q260 20 270 24" stroke="#fdba74" stroke-width="1.5" fill="none"/>
      <!-- Wok with flames -->
      <ellipse cx="320" cy="38" rx="18" ry="6" fill="#1c1814" opacity=".3"/>
      <path d="M302 30 Q310 16 320 28 Q330 16 338 30 Q330 40 320 38 Q310 40 302 30Z" fill="#374151"/>
      <path d="M312 20 Q314 14 316 18" stroke="#f97316" stroke-width="2" stroke-linecap="round" fill="none"/>
      <path d="M320 18 Q322 11 324 16" stroke="#fbbf24" stroke-width="2" stroke-linecap="round" fill="none"/>
      <path d="M326 21 Q328 15 330 19" stroke="#f97316" stroke-width="2" stroke-linecap="round" fill="none"/>
      <!-- Pineapple bun (cha chaan teng) -->
      <ellipse cx="375" cy="34" rx="16" ry="8" fill="#f97316" opacity=".4"/>
      <ellipse cx="375" cy="30" rx="16" ry="10" fill="#fef08a"/>
      <path d="M359 30 Q366 22 375 24 Q384 22 391 30" fill="#fbbf24"/>
      <path d="M362 27 L388 27 M364 30 L386 30" stroke="#f59e0b" stroke-width="1" opacity=".5"/>
      <!-- Milk tea cup HK style -->
      <rect x="420" y="18" width="20" height="24" rx="4" fill="#fed7aa" stroke="#f97316" stroke-width="1.5"/>
      <rect x="420" y="18" width="20" height="7" rx="3" fill="#fde68a"/>
      <rect x="416" y="40" width="28" height="4" rx="2" fill="#f97316" opacity=".6"/>
      <path d="M440 26 Q446 26 446 30 Q446 34 440 34" stroke="#f97316" stroke-width="1.5" fill="none" stroke-linecap="round"/>
      <!-- Star icon -->
      <text x="472" y="36" font-size="18" fill="#f97316" opacity=".6">â­</text>
      <!-- Char siu -->
      <ellipse cx="520" cy="34" rx="16" ry="7" fill="#c2410c" opacity=".4"/>
      <rect x="504" y="22" width="32" height="14" rx="7" fill="#dc2626" opacity=".8"/>
      <path d="M507 24 Q520 20 533 24" fill="#f97316" opacity=".6"/>
      <ellipse cx="520" cy="22" rx="16" ry="5" fill="#ea580c" opacity=".7"/>
      <!-- Chopsticks -->
      <rect x="560" y="8" width="3" height="35" rx="1.5" fill="#c2410c" transform="rotate(-10 562 25)"/>
      <rect x="570" y="8" width="3" height="35" rx="1.5" fill="#c2410c" transform="rotate(10 572 25)"/>
      <!-- Egg tart -->
      <ellipse cx="618" cy="36" rx="14" ry="5" fill="#f97316" opacity=".3"/>
      <ellipse cx="618" cy="30" rx="14" ry="8" fill="#fef3c7" stroke="#fbbf24" stroke-width="1.5"/>
      <ellipse cx="618" cy="28" rx="10" ry="6" fill="#fde68a"/>
      <ellipse cx="618" cy="27" rx="7" ry="4" fill="#fbbf24" opacity=".8"/>
      <!-- Fortune cookie -->
      <path d="M665 38 Q672 28 680 28 Q688 28 695 38 Q688 44 680 40 Q672 44 665 38Z" fill="#fde68a" stroke="#fbbf24" stroke-width="1.5"/>
      <path d="M672 38 Q680 34 688 38" stroke="#f59e0b" stroke-width="1.5" fill="none"/>
      <!-- Little chef hat -->
      <rect x="728" y="28" width="24" height="12" rx="3" fill="#fff" stroke="#e5e7eb" stroke-width="1.5"/>
      <ellipse cx="740" cy="28" rx="14" ry="8" fill="#fff" stroke="#e5e7eb" stroke-width="1.5"/>
      <ellipse cx="740" cy="24" rx="8" ry="10" fill="#fff" stroke="#e5e7eb" stroke-width="1.5"/>
      <!-- Sparkle -->
      <text x="775" y="32" font-size="16" fill="#f97316" opacity=".5">âœ¨</text>
      <!-- Spring roll -->
      <rect x="806" y="20" width="28" height="18" rx="9" fill="#fbbf24" stroke="#f97316" stroke-width="1.5" transform="rotate(-20 820 29)"/>
      <path d="M808 24 Q820 20 832 24" stroke="#f59e0b" stroke-width="1" fill="none" transform="rotate(-20 820 29)"/>
      <!-- Bowl with chopsticks -->
      <ellipse cx="880" cy="36" rx="18" ry="7" fill="#f97316" opacity=".5"/>
      <path d="M862 29 Q870 18 880 22 Q890 18 898 29 Q890 38 880 36 Q870 38 862 29Z" fill="#fef3c7" stroke="#f97316" stroke-width="1.5"/>
      <rect x="872" y="10" width="2.5" height="24" rx="1.2" fill="#c2410c" transform="rotate(-12 873 22)"/>
      <rect x="883" y="10" width="2.5" height="24" rx="1.2" fill="#c2410c" transform="rotate(12 884 22)"/>
      <!-- Pork bao -->
      <ellipse cx="935" cy="36" rx="15" ry="5" fill="#f97316" opacity=".3"/>
      <ellipse cx="935" cy="29" rx="15" ry="12" fill="#fef9c3" stroke="#fde68a" stroke-width="1.5"/>
      <path d="M927 26 Q935 22 943 26" stroke="#fbbf24" stroke-width="1.5" fill="none"/>
      <circle cx="935" cy="25" r="3" fill="#fde68a"/>
      <!-- Pineapple -->
      <text x="966" y="36" font-size="22" fill="#fbbf24">ğŸ</text>
      <!-- Pepper -->
      <text x="1008" y="36" font-size="22">ğŸŒ¶ï¸</text>
      <!-- Star anise deco -->
      <text x="1052" y="36" font-size="18" fill="#f97316">âœ¦</text>
      <!-- Little restaurant building -->
      <rect x="1086" y="18" width="36" height="24" rx="3" fill="#fed7aa" stroke="#f97316" stroke-width="1.5"/>
      <path d="M1083 20 L1104 10 L1125 20Z" fill="#f97316"/>
      <rect x="1098" y="28" width="12" height="14" rx="2" fill="#fff" stroke="#f97316" stroke-width="1"/>
      <rect x="1089" y="24" width="8" height="8" rx="1.5" fill="#fef3c7" stroke="#fdba74" stroke-width="1"/>
      <rect x="1115" y="24" width="8" height="8" rx="1.5" fill="#fef3c7" stroke="#fdba74" stroke-width="1"/>
      <text x="1098" y="20" font-size="7" fill="#fff" font-weight="bold" font-family="sans-serif">ğŸœ</text>
      <!-- Heart -->
      <text x="1145" y="35" font-size="16" fill="#f97316" opacity=".6">â™¥</text>
      <!-- Repeat gap -->
      <text x="1180" y="34" font-size="20">ğŸ¥¢</text>
      <text x="1220" y="34" font-size="20">ğŸ¥¡</text>
      <text x="1260" y="34" font-size="20">ğŸ±</text>
      <text x="1305" y="34" font-size="20">ğŸ§†</text>
      <text x="1350" y="34" font-size="16" fill="#f97316">âœ¦</text>
    </svg>
    <!-- Duplicate for seamless marquee -->
    <svg width="1400" height="48" viewBox="0 0 1400 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <ellipse cx="50" cy="34" rx="20" ry="8" fill="#f97316" opacity=".9"/>
      <ellipse cx="50" cy="30" rx="20" ry="8" fill="#fb923c"/>
      <path d="M30 30 Q50 20 70 30" fill="#fef3c7"/>
      <circle cx="42" cy="27" r="3" fill="#f97316"/>
      <circle cx="52" cy="25" r="2.5" fill="#dc2626"/>
      <circle cx="61" cy="27" r="2" fill="#16a34a"/>
      <path d="M42 18 Q40 12 42 8" stroke="#fdba74" stroke-width="1.5" stroke-linecap="round" fill="none"/>
      <path d="M50 16 Q48 10 50 6" stroke="#fdba74" stroke-width="1.5" stroke-linecap="round" fill="none"/>
      <path d="M58 18 Q56 12 58 8" stroke="#fdba74" stroke-width="1.5" stroke-linecap="round" fill="none"/>
      <rect x="100" y="22" width="18" height="14" rx="5" fill="#f5f5f5" stroke="#e5e7eb" stroke-width="1"/>
      <ellipse cx="109" cy="22" rx="9" ry="5" fill="#fed7aa"/>
      <ellipse cx="109" cy="21" rx="6" ry="3.5" fill="#dc2626" opacity=".8"/>
      <rect x="106" y="20" width="6" height="3" rx="1.5" fill="#16a34a" opacity=".7"/>
      <ellipse cx="165" cy="36" rx="17" ry="6" fill="#c2410c" opacity=".5"/>
      <rect x="148" y="22" width="34" height="16" rx="6" fill="#fed7aa" stroke="#f97316" stroke-width="1.5"/>
      <ellipse cx="165" cy="22" rx="17" ry="6" fill="#fef3c7" stroke="#f97316" stroke-width="1.5"/>
      <circle cx="157" cy="28" r="4" fill="#fff" stroke="#fdba74" stroke-width="1"/>
      <circle cx="165" cy="26" r="4" fill="#fff" stroke="#fdba74" stroke-width="1"/>
      <circle cx="173" cy="28" r="4" fill="#fff" stroke="#fdba74" stroke-width="1"/>
      <rect x="212" y="10" width="4" height="30" rx="2" fill="#f97316"/>
      <path d="M210 10 L210 20 M214 10 L214 20 M218 10 L218 20" stroke="#f97316" stroke-width="1.5" stroke-linecap="round"/>
      <ellipse cx="260" cy="34" rx="22" ry="7" fill="#fdba74" opacity=".5"/>
      <path d="M238 28 Q248 16 260 20 Q272 16 282 28 Q272 36 260 34 Q248 36 238 28Z" fill="#fef9c3" stroke="#f97316" stroke-width="1.5"/>
      <path d="M250 24 Q260 20 270 24" stroke="#fdba74" stroke-width="1.5" fill="none"/>
      <ellipse cx="320" cy="38" rx="18" ry="6" fill="#1c1814" opacity=".3"/>
      <path d="M302 30 Q310 16 320 28 Q330 16 338 30 Q330 40 320 38 Q310 40 302 30Z" fill="#374151"/>
      <path d="M312 20 Q314 14 316 18" stroke="#f97316" stroke-width="2" stroke-linecap="round" fill="none"/>
      <path d="M320 18 Q322 11 324 16" stroke="#fbbf24" stroke-width="2" stroke-linecap="round" fill="none"/>
      <path d="M326 21 Q328 15 330 19" stroke="#f97316" stroke-width="2" stroke-linecap="round" fill="none"/>
      <ellipse cx="375" cy="34" rx="16" ry="8" fill="#f97316" opacity=".4"/>
      <ellipse cx="375" cy="30" rx="16" ry="10" fill="#fef08a"/>
      <path d="M359 30 Q366 22 375 24 Q384 22 391 30" fill="#fbbf24"/>
      <rect x="420" y="18" width="20" height="24" rx="4" fill="#fed7aa" stroke="#f97316" stroke-width="1.5"/>
      <rect x="420" y="18" width="20" height="7" rx="3" fill="#fde68a"/>
      <rect x="416" y="40" width="28" height="4" rx="2" fill="#f97316" opacity=".6"/>
      <path d="M440 26 Q446 26 446 30 Q446 34 440 34" stroke="#f97316" stroke-width="1.5" fill="none" stroke-linecap="round"/>
      <text x="472" y="36" font-size="18" fill="#f97316" opacity=".6">â­</text>
      <ellipse cx="520" cy="34" rx="16" ry="7" fill="#c2410c" opacity=".4"/>
      <rect x="504" y="22" width="32" height="14" rx="7" fill="#dc2626" opacity=".8"/>
      <ellipse cx="520" cy="22" rx="16" ry="5" fill="#ea580c" opacity=".7"/>
      <rect x="560" y="8" width="3" height="35" rx="1.5" fill="#c2410c" transform="rotate(-10 562 25)"/>
      <rect x="570" y="8" width="3" height="35" rx="1.5" fill="#c2410c" transform="rotate(10 572 25)"/>
      <ellipse cx="618" cy="36" rx="14" ry="5" fill="#f97316" opacity=".3"/>
      <ellipse cx="618" cy="30" rx="14" ry="8" fill="#fef3c7" stroke="#fbbf24" stroke-width="1.5"/>
      <ellipse cx="618" cy="28" rx="10" ry="6" fill="#fde68a"/>
      <ellipse cx="618" cy="27" rx="7" ry="4" fill="#fbbf24" opacity=".8"/>
      <path d="M665 38 Q672 28 680 28 Q688 28 695 38 Q688 44 680 40 Q672 44 665 38Z" fill="#fde68a" stroke="#fbbf24" stroke-width="1.5"/>
      <path d="M672 38 Q680 34 688 38" stroke="#f59e0b" stroke-width="1.5" fill="none"/>
      <rect x="728" y="28" width="24" height="12" rx="3" fill="#fff" stroke="#e5e7eb" stroke-width="1.5"/>
      <ellipse cx="740" cy="28" rx="14" ry="8" fill="#fff" stroke="#e5e7eb" stroke-width="1.5"/>
      <ellipse cx="740" cy="24" rx="8" ry="10" fill="#fff" stroke="#e5e7eb" stroke-width="1.5"/>
      <text x="775" y="32" font-size="16" fill="#f97316" opacity=".5">âœ¨</text>
      <rect x="806" y="20" width="28" height="18" rx="9" fill="#fbbf24" stroke="#f97316" stroke-width="1.5" transform="rotate(-20 820 29)"/>
      <ellipse cx="880" cy="36" rx="18" ry="7" fill="#f97316" opacity=".5"/>
      <path d="M862 29 Q870 18 880 22 Q890 18 898 29 Q890 38 880 36 Q870 38 862 29Z" fill="#fef3c7" stroke="#f97316" stroke-width="1.5"/>
      <rect x="872" y="10" width="2.5" height="24" rx="1.2" fill="#c2410c" transform="rotate(-12 873 22)"/>
      <rect x="883" y="10" width="2.5" height="24" rx="1.2" fill="#c2410c" transform="rotate(12 884 22)"/>
      <ellipse cx="935" cy="36" rx="15" ry="5" fill="#f97316" opacity=".3"/>
      <ellipse cx="935" cy="29" rx="15" ry="12" fill="#fef9c3" stroke="#fde68a" stroke-width="1.5"/>
      <path d="M927 26 Q935 22 943 26" stroke="#fbbf24" stroke-width="1.5" fill="none"/>
      <circle cx="935" cy="25" r="3" fill="#fde68a"/>
      <text x="966" y="36" font-size="22" fill="#fbbf24">ğŸ</text>
      <text x="1008" y="36" font-size="22">ğŸŒ¶ï¸</text>
      <text x="1052" y="36" font-size="18" fill="#f97316">âœ¦</text>
      <rect x="1086" y="18" width="36" height="24" rx="3" fill="#fed7aa" stroke="#f97316" stroke-width="1.5"/>
      <path d="M1083 20 L1104 10 L1125 20Z" fill="#f97316"/>
      <rect x="1098" y="28" width="12" height="14" rx="2" fill="#fff" stroke="#f97316" stroke-width="1"/>
      <rect x="1089" y="24" width="8" height="8" rx="1.5" fill="#fef3c7" stroke="#fdba74" stroke-width="1"/>
      <rect x="1115" y="24" width="8" height="8" rx="1.5" fill="#fef3c7" stroke="#fdba74" stroke-width="1"/>
      <text x="1145" y="35" font-size="16" fill="#f97316" opacity=".6">â™¥</text>
      <text x="1180" y="34" font-size="20">ğŸ¥¢</text>
      <text x="1220" y="34" font-size="20">ğŸ¥¡</text>
      <text x="1260" y="34" font-size="20">ğŸ±</text>
      <text x="1305" y="34" font-size="20">ğŸ§†</text>
      <text x="1350" y="34" font-size="16" fill="#f97316">âœ¦</text>
    </svg>
  </div>
</div>

<!-- MAIN -->
<div class="main-content">

<!-- LEFT PANEL -->
<div class="left-panel">
  <div class="panel-header">
    <div class="panel-header-icon">ğŸ§‘â€ğŸ³</div>
    <div>
      <div class="panel-title" id="p-title">My Business Plan</div>
      <div class="panel-desc" id="p-desc">Set decisions â†’ instant Five Forces update</div>
    </div>
  </div>

  <div class="section">
    <div class="section-label">ğŸ’° <span id="l-budget">â‘  Initial Budget</span></div>
    <div class="option-group">
      <button class="option-btn" data-group="budget" data-val="low" onclick="pick('budget','low',this)"><span id="b-low">HK$100Kâ€“500K (Light asset entry)</span></button>
      <button class="option-btn" data-group="budget" data-val="mid" onclick="pick('budget','mid',this)"><span id="b-mid">HK$500Kâ€“1M (Mid-scale standard)</span></button>
      <button class="option-btn" data-group="budget" data-val="high" onclick="pick('budget','high',this)"><span id="b-high">HK$1M+ (Scaled investment)</span></button>
    </div>
  </div>

  <div class="section">
    <div class="section-label">ğŸ“Š <span id="l-cost">â‘¡ Cost Allocation</span></div>
    <div class="option-group">
      <button class="option-btn" data-group="cost" data-val="foodheavy" onclick="pick('cost','foodheavy',this)"><span id="c-foodheavy">Food-heavy (Food 45% / Rent 30% / Fitout 25%)</span></button>
      <button class="option-btn" data-group="cost" data-val="balanced" onclick="pick('cost','balanced',this)"><span id="c-balanced">Balanced (Food 35% / Rent 35% / Fitout 30%)</span></button>
      <button class="option-btn" data-group="cost" data-val="ambiance" onclick="pick('cost','ambiance',this)"><span id="c-ambiance">Ambiance-heavy (Food 25% / Rent 25% / Fitout 50%)</span></button>
    </div>
    <div id="costBars" style="margin-top:10px;display:none">
      <div class="cost-row"><span class="cost-icon">ğŸ¥©</span><span class="cost-label" id="cl-food">Food &amp; Ingredients</span><span class="cost-val" id="c1">â€”</span></div>
      <div class="cost-bar"><div class="cost-fill" id="b1" style="width:0"></div></div>
      <div class="cost-row"><span class="cost-icon">ğŸ </span><span class="cost-label" id="cl-rent">Rent</span><span class="cost-val" id="c2">â€”</span></div>
      <div class="cost-bar"><div class="cost-fill" id="b2" style="width:0;background:linear-gradient(90deg,#60a5fa,#3b82f6)"></div></div>
      <div class="cost-row"><span class="cost-icon">ğŸ¨</span><span class="cost-label" id="cl-fitout">Fitout &amp; Renovation</span><span class="cost-val" id="c3">â€”</span></div>
      <div class="cost-bar"><div class="cost-fill" id="b3" style="width:0;background:linear-gradient(90deg,#86efac,#22c55e)"></div></div>
    </div>
  </div>

  <div class="section">
    <div class="section-label">â­ <span id="l-comp">â‘¢ Core Competency</span></div>
    <div class="option-group">
      <button class="option-btn" data-group="comp" data-val="signature" onclick="pick('comp','signature',this)"><span id="comp-sig">ğŸ½ï¸ Signature Dishes (Differentiation)</span></button>
      <button class="option-btn" data-group="comp" data-val="value" onclick="pick('comp','value',this)"><span id="comp-val">ğŸ’ Value-for-Money (Mass market)</span></button>
      <button class="option-btn" data-group="comp" data-val="luxury" onclick="pick('comp','luxury',this)"><span id="comp-lux">âœ¨ Premium Ambiance (Experience premium)</span></button>
      <button class="option-btn" data-group="comp" data-val="supply" onclick="pick('comp','supply',this)"><span id="comp-sup">ğŸ”— Exclusive Supply Chain (Cost moat)</span></button>
    </div>
  </div>

  <div class="section">
    <div class="section-label">ğŸ“ <span id="l-locSeg">â‘£ Location &amp; Target Segment</span></div>
    <div style="margin-bottom:10px">
      <div style="font-size:10px;color:var(--muted);margin-bottom:5px;font-weight:700" id="ll-location">Location</div>
      <div style="display:flex;gap:6px">
        <button class="option-btn" style="flex:1" data-group="location" data-val="community" onclick="pick('location','community',this)"><span id="loc-com">ğŸ˜ï¸ Community</span></button>
        <button class="option-btn" style="flex:1" data-group="location" data-val="commercial" onclick="pick('location','commercial',this)"><span id="loc-cbd">ğŸ™ï¸ Commercial</span></button>
      </div>
    </div>
    <div>
      <div style="font-size:10px;color:var(--muted);margin-bottom:5px;font-weight:700" id="ll-segment">Target Segment</div>
      <div style="display:flex;gap:6px">
        <button class="option-btn" style="flex:1" data-group="segment" data-val="mass" onclick="pick('segment','mass',this)"><span id="seg-mass">ğŸ‘¥ Mass</span></button>
        <button class="option-btn" style="flex:1" data-group="segment" data-val="premium" onclick="pick('segment','premium',this)"><span id="seg-prem">ğŸŒŸ Premium</span></button>
      </div>
    </div>
  </div>

  <!-- SCORE SUMMARY -->
  <div class="score-summary">
    <div class="score-main-label" id="ss-label">PROFIT SCORE</div>
    <div class="score-big" id="mainScore">â€”</div>
    <div class="score-verdict" id="scoreVerdict" data-zh-placeholder="è«‹å®ŒæˆåŸºæœ¬ç›¤è¨­ç½®">Complete setup to see score</div>
    <div class="five-force-scores">
      <div class="ff-row" onclick="switchTab('suppliers')">
        <span class="ff-emoji">ğŸ­</span>
        <span class="ff-label" id="ff-s">Supplier Power</span>
        <div class="ff-bar-bg"><div class="ff-bar-fill" id="bar-s" style="width:0;background:#fb923c"></div></div>
        <span class="ff-num" id="num-s">â€”</span>
      </div>
      <div class="ff-row" onclick="switchTab('buyers')">
        <span class="ff-emoji">ğŸ‘¥</span>
        <span class="ff-label" id="ff-b">Buyer Power</span>
        <div class="ff-bar-bg"><div class="ff-bar-fill" id="bar-b" style="width:0;background:#fb923c"></div></div>
        <span class="ff-num" id="num-b">â€”</span>
      </div>
      <div class="ff-row" onclick="switchTab('entrants')">
        <span class="ff-emoji">ğŸšª</span>
        <span class="ff-label" id="ff-e">New Entrants</span>
        <div class="ff-bar-bg"><div class="ff-bar-fill" id="bar-e" style="width:0;background:#fbbf24"></div></div>
        <span class="ff-num" id="num-e">â€”</span>
      </div>
      <div class="ff-row" onclick="switchTab('substitutes')">
        <span class="ff-emoji">ğŸ”„</span>
        <span class="ff-label" id="ff-sub">Substitutes</span>
        <div class="ff-bar-bg"><div class="ff-bar-fill" id="bar-sub" style="width:0;background:#fbbf24"></div></div>
        <span class="ff-num" id="num-sub">â€”</span>
      </div>
      <div class="ff-row" onclick="switchTab('rivals')">
        <span class="ff-emoji">âš”ï¸</span>
        <span class="ff-label" id="ff-r">Rivalry</span>
        <div class="ff-bar-bg"><div class="ff-bar-fill" id="bar-r" style="width:0;background:#fb923c"></div></div>
        <span class="ff-num" id="num-r">â€”</span>
      </div>
    </div>
  </div>
</div><!-- end left -->

<!-- RIGHT PANEL -->
<div class="right-panel">
  <div class="tab-bar">
    <button class="tab-btn active" onclick="switchTab('rivals')" id="tab-rivals">âš”ï¸ <span id="tab-r-lbl">Rivalry</span></button>
    <button class="tab-btn" onclick="switchTab('entrants')" id="tab-entrants">ğŸšª <span id="tab-e-lbl">New Entrants</span></button>
    <button class="tab-btn" onclick="switchTab('suppliers')" id="tab-suppliers">ğŸ­ <span id="tab-s-lbl">Suppliers</span></button>
    <button class="tab-btn" onclick="switchTab('buyers')" id="tab-buyers">ğŸ‘¥ <span id="tab-b-lbl">Buyers</span></button>
    <button class="tab-btn" onclick="switchTab('substitutes')" id="tab-substitutes">ğŸ”„ <span id="tab-sub-lbl">Substitutes</span></button>
    <button class="tab-btn" onclick="switchTab('scoring')" id="tab-scoring">ğŸ“Š <span id="tab-sc-lbl">Score Board</span></button>
    <button class="tab-btn" onclick="switchTab('report')" id="tab-report">ğŸ“„ <span id="tab-rp-lbl">Report</span></button>
  </div>

  <!-- â”€â”€ RIVALS â”€â”€ -->
  <div class="tab-content active" id="content-rivals">
    <div class="force-header">
      <div class="force-title-wrap">
        <div class="force-emoji">âš”ï¸</div>
        <div>
          <div class="force-name" id="fn-rivals">Rivalry Among Existing Competitors</div>
          <div class="force-sub">ç¾æœ‰ç«¶çˆ­è€…ç«¶çˆ­å¼·åº¦</div>
        </div>
      </div>
      <span class="intensity-badge intensity-high">HIGH é«˜</span>
    </div>
    <div class="data-notice">âš ï¸ <span id="dn-rivals">All data sourced from: User-provided research report (HK F&amp;B Porter's Five Forces Strategic Research Report, 2024â€“2026)</span></div>
    <div class="data-cards">
      <div class="data-card">
        <div class="data-card-label">ğŸœ <span id="rc1-l">Market Size &amp; Real Growth</span></div>
        <div class="data-card-value" id="rc1-v">2025 Full-Year Restaurant Receipts (Provisional): HK$109.6 Billion</div>
        <div class="data-card-note" id="rc1-n">Nominal growth only +0.2%; real receipt volume fell âˆ’0.9% YoY (flat value, shrinking volume)</div>
        <div class="data-source" id="rc1-s">Source: C&SD â€” Provisional Statistics of Restaurant Receipts and Purchases, Q4 & Full Year 2025</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸª <span id="rc2-l">Net Outlet Change (2024â€“2025)</span></div>
        <div class="data-card-value" id="rc2-v">First Annual Net Contraction since 2018</div>
        <div class="data-card-note" id="rc2-n">Over the 12-month period to April 2025, closures exceeded new licence issuances â€” intensifying competition for existing players</div>
        <div class="data-source" id="rc2-s">Source: FEHD data analysis, cited via SCMP / Vino Joy (as per research report)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ“‰ <span id="rc3-l">Chinese vs. Non-Chinese Restaurant Performance</span></div>
        <div class="data-card-value" id="rc3-v">Chinese restaurants: Revenue âˆ’2.9% / Volume âˆ’4.3% (Full Year 2025)</div>
        <div class="data-card-note" id="rc3-n">Non-Chinese segment grew +4.0% â€” structural market redistribution underway; traditional Chinese positioning faces dual decline</div>
        <div class="data-source" id="rc3-s">Source: Census and Statistics Department (C&SD), Full Year 2025</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ’¸ <span id="rc4-l">Rigid Cost Structure</span></div>
        <div class="data-card-value" id="rc4-v">2025 Food Purchases: HK$35.0B = 31.9% of revenue; Labour: 25%â€“35% of revenue</div>
        <div class="data-card-note" id="rc4-n">Dual rigid cost burden severely constrains pricing flexibility across all segments</div>
        <div class="data-source" id="rc4-s">Source: C&SD; Labour cost range: BLS / Escoffier (as per research report)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ“± <span id="rc5-l">Delivery Platform Commission Erosion</span></div>
        <div class="data-card-value" id="rc5-v">Standard delivery platform commission rate: ~30%</div>
        <div class="data-card-note" id="rc5-n">To sustain delivery viability, restaurants must mark up delivery menus by 40â€“50%, undermining long-term brand loyalty</div>
        <div class="data-source" id="rc5-s">Source: Industry survey (as cited in research report)</div>
      </div>
    </div>
    <div id="rivals-adapt" style="margin-top:14px"></div>
  </div>

  <!-- â”€â”€ ENTRANTS â”€â”€ -->
  <div class="tab-content" id="content-entrants">
    <div class="force-header">
      <div class="force-title-wrap">
        <div class="force-emoji">ğŸšª</div>
        <div>
          <div class="force-name" id="fn-entrants">Threat of New Entrants</div>
          <div class="force-sub">æ–°é€²å…¥è€…å¨è„…</div>
        </div>
      </div>
      <span class="intensity-badge intensity-medium">MEDIUM ä¸­</span>
    </div>
    <div class="data-notice">âš ï¸ <span id="dn-entrants">All data sourced from: User-provided research report (HK F&amp;B Porter's Five Forces Strategic Research Report, 2024â€“2026)</span></div>
    <div class="data-cards">
      <div class="data-card">
        <div class="data-card-label">ğŸ“‹ <span id="ec1-l">Licensing Barrier: PCS System (from 1 Feb 2024)</span></div>
        <div class="data-card-value" id="ec1-v">Licence issued within 2 working days after submission of professional compliance certificate</div>
        <div class="data-card-note" id="ec1-n">~90% reduction vs. traditional AVP system (20 working days) â€” administrative barrier significantly lowered</div>
        <div class="data-source" id="ec1-s">Source: FEHD â€” Guide to Professional Certification System (PCS)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ“Š <span id="ec2-l">First-Year Survival Rate (High Exit Risk)</span></div>
        <div class="data-card-value" id="ec2-v">~26% of new restaurants close or change ownership within year one</div>
        <div class="data-card-note" id="ec2-n">H1 2025 saw multiple established brands including Taipan Bread &amp; Cakes shut down, confirming persistent survival risk</div>
        <div class="data-source" id="ec2-s">Source: BLS / Escoffier (as cited in research report)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ¢ <span id="ec3-l">Capital Scale Barrier (Chain Reference)</span></div>
        <div class="data-card-value" id="ec3-v">Fairwood Holdings PP&amp;E book value as of March 2025: HK$433 million</div>
        <div class="data-card-note" id="ec3-n">Capital intensity for scaled entry far exceeds independent new entrant capacity; significant barrier at mid-to-high scale</div>
        <div class="data-source" id="ec3-s">Source: Fairwood Holdings â€” Annual Results Announcement FY2024/25 (HKEXnews)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ˜ï¸ <span id="ec4-l">Rental Environment (2025)</span></div>
        <div class="data-card-value" id="ec4-v">Retail rents in prime districts (e.g. TST) declined slightly by âˆ’0.5% in 2025</div>
        <div class="data-card-note" id="ec4-n">"Tenant-friendly" environment lowers initial fixed-cost barriers â€” but benefits incumbents and new entrants equally</div>
        <div class="data-source" id="ec4-s">Source: Knight Frank â€” Hong Kong Market Report Q4 2025</div>
      </div>
    </div>
    <div id="entrants-adapt" style="margin-top:14px"></div>
  </div>

  <!-- â”€â”€ SUPPLIERS â”€â”€ -->
  <div class="tab-content" id="content-suppliers">
    <div class="force-header">
      <div class="force-title-wrap">
        <div class="force-emoji">ğŸ­</div>
        <div>
          <div class="force-name" id="fn-suppliers">Bargaining Power of Suppliers</div>
          <div class="force-sub">ä¾›æ‡‰å•†è­°åƒ¹èƒ½åŠ›</div>
        </div>
      </div>
      <span class="intensity-badge intensity-medium">MEDIUM ä¸­</span>
    </div>
    <div class="data-notice">âš ï¸ <span id="dn-suppliers">All data sourced from: User-provided research report (HK F&amp;B Porter's Five Forces Strategic Research Report, 2024â€“2026)</span></div>
    <div class="data-cards">
      <div class="data-card">
        <div class="data-card-label">ğŸš¢ <span id="sc1-l">Food Import Dependency (Structural Vulnerability)</span></div>
        <div class="data-card-value" id="sc1-v">95% of Hong Kong's food supply is imported</div>
        <div class="data-card-note" id="sc1-n">Highly exposed to international commodity price shocks and supply chain disruptions; local agricultural capacity minimal</div>
        <div class="data-source" id="sc1-s">Source: USDA FAS â€” Hong Kong Food Service Annual Report 2025</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸª <span id="sc2-l">Distribution Channel Concentration</span></div>
        <div class="data-card-value" id="sc2-v">DCH (Dah Chong Hong) represents 100+ brands; Ng Fung Hong dominates fresh meat supply</div>
        <div class="data-card-note" id="sc2-n">A few large distributors control wholesale channels; small-to-mid restaurants have limited alternative sourcing</div>
        <div class="data-source" id="sc2-s">Source: DCH Holdings corporate data; Ng Fung Hong industry data (as cited in research report)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ“ˆ <span id="sc3-l">Food Price Volatility (Dec 2025)</span></div>
        <div class="data-card-value" id="sc3-v">Basic food CPI rose only +0.7% YoY in December 2025</div>
        <div class="data-card-note" id="sc3-n">Mild inflation temporarily moderates supplier bargaining pressure, providing a short-term margin buffer for restaurants</div>
        <div class="data-source" id="sc3-s">Source: C&SD â€” Consumer Price Index Report, December 2025</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ’° <span id="sc4-l">Industry Average Net Profit Margin (2024)</span></div>
        <div class="data-card-value" id="sc4-v">HK F&amp;B average profit margin: ~23%</div>
        <div class="data-card-note" id="sc4-n">Significantly below regional peers (e.g. Vietnam: 38%); reflects chronic margin compression from supplier and labour costs</div>
        <div class="data-source" id="sc4-s">Source: Restroworks â€” Hong Kong Restaurant Statistics (as cited in research report)</div>
      </div>
    </div>
    <div id="suppliers-adapt" style="margin-top:14px"></div>
  </div>

  <!-- â”€â”€ BUYERS â”€â”€ -->
  <div class="tab-content" id="content-buyers">
    <div class="force-header">
      <div class="force-title-wrap">
        <div class="force-emoji">ğŸ‘¥</div>
        <div>
          <div class="force-name" id="fn-buyers">Bargaining Power of Buyers</div>
          <div class="force-sub">è³¼è²·è€…è­°åƒ¹èƒ½åŠ›</div>
        </div>
      </div>
      <span class="intensity-badge intensity-high">HIGH é«˜</span>
    </div>
    <div class="data-notice">âš ï¸ <span id="dn-buyers">All data sourced from: User-provided research report (HK F&amp;B Porter's Five Forces Strategic Research Report, 2024â€“2026)</span></div>
    <div class="data-cards">
      <div class="data-card">
        <div class="data-card-label">ğŸš† <span id="bc1-l">Northbound Spending: Structural Demand Leakage (Irreversible)</span></div>
        <div class="data-card-value" id="bc1-v">2025: 87.1M HK resident land departures to Mainland; 2024 estimated Mainland spend: HK$55.7B (excl. transport)</div>
        <div class="data-card-note" id="bc1-n">Trade bodies describe this trend as "totally irreversible"; departure volume surged from 53.6M in 2023</div>
        <div class="data-source" id="bc1-s">Source: SCMP Research / Official data; China Daily (as cited in research report)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">âœˆï¸ <span id="bc2-l">Visitor Recovery but Spending Downgrade</span></div>
        <div class="data-card-value" id="bc2-v">2024: 44.5M visitor arrivals; Mainland visitor per-capita spend âˆ’30% vs. 2018 baseline</div>
        <div class="data-card-note" id="bc2-n">Volume recovered but spending power declined sharply â€” restaurants forced to compete on price rather than premium experience</div>
        <div class="data-source" id="bc2-s">Source: China Daily / Hong Kong Tourism Board (HKTB) (as cited in research report)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ“± <span id="bc3-l">Delivery Platform Penetration &amp; Subsidy-Driven Behaviour</span></div>
        <div class="data-card-value" id="bc3-v">2025 delivery penetration: 38%; KeeTa captured 44% market share in early 2024</div>
        <div class="data-card-note" id="bc3-n">Aggressive KeeTa subsidies conditioned consumers to discount-driven purchasing behaviour, raising price sensitivity</div>
        <div class="data-source" id="bc3-s">Source: BBCIncorp (as cited in research report)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ’³ <span id="bc4-l">Cross-Border Payment Integration Cementing Northbound Habits</span></div>
        <div class="data-card-value" id="bc4-v">2025: 126M cashless transactions by HK residents in Shenzhen / RMB 15.481B in value</div>
        <div class="data-card-note" id="bc4-n">Seamless payment integration eliminates friction, deepening Mainland spending habits and permanently diverting local F&amp;B demand</div>
        <div class="data-source" id="bc4-s">Source: People's Bank of China (Shenzhen), 2025 data</div>
      </div>
    </div>
    <div id="buyers-adapt" style="margin-top:14px"></div>
  </div>

  <!-- â”€â”€ SUBSTITUTES â”€â”€ -->
  <div class="tab-content" id="content-substitutes">
    <div class="force-header">
      <div class="force-title-wrap">
        <div class="force-emoji">ğŸ”„</div>
        <div>
          <div class="force-name" id="fn-substitutes">Threat of Substitutes</div>
          <div class="force-sub">æ›¿ä»£å“å¨è„… <span style="font-size:10px;color:var(--muted)">(Delivery = internal channel, excluded per Module 5)</span></div>
        </div>
      </div>
      <span class="intensity-badge intensity-medium">MEDIUM ä¸­</span>
    </div>
    <div class="data-notice">âš ï¸ <span id="dn-substitutes">Per report Module 5: delivery is an internal restaurant channel and is NOT classified as a substitute â€” assigned to Buyers (Module 4)</span></div>
    <div class="data-cards">
      <div class="data-card">
        <div class="data-card-label">ğŸ›’ <span id="subc1-l">Retail Channel Market Share</span></div>
        <div class="data-card-value" id="subc1-v">Supermarkets + convenience stores account for 55% of total food &amp; beverage retail sales</div>
        <div class="data-card-note" id="subc1-n">In-store cooked food counters and convenience store ready-meals directly substitute licensed dine-in, especially for lunch and casual dining occasions</div>
        <div class="data-source" id="subc1-s">Source: USDA FAS â€” Hong Kong Retail Foods Annual Report 2025</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ¥¡ <span id="subc2-l">Takeaway-Only Establishment Growth (2014â€“2024)</span></div>
        <div class="data-card-value" id="subc2-v">Takeaway-only outlets grew 39% over the 10-year period 2014â€“2024</div>
        <div class="data-card-note" id="subc2-n">Priced at HK$30â€“$50 per head, these outlets directly substitute licensed sit-down dining for lunch and casual meals</div>
        <div class="data-source" id="subc2-s">Source: LegCo Research Office â€” F&amp;B Industry Challenges Brief (as cited in research report)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ’» <span id="subc3-l">Food E-Commerce Scale (2025 Forecast)</span></div>
        <div class="data-card-value" id="subc3-v"><span class="tag-unavail">[DATA UNAVAILABLE]</span> Specific revenue figure not fully presented in report version</div>
        <div class="data-card-note" id="subc3-n">Report confirms ongoing e-commerce expansion; improved logistics make home cooking competitive on cost and health grounds</div>
        <div class="data-source" id="subc3-s">Source: Statista / Digital Nomads HK (cited in report; specific value not fully disclosed)</div>
      </div>
      <div class="data-card">
        <div class="data-card-label">ğŸ¬ <span id="subc4-l">Supermarket Cooked Food Sales (2023)</span></div>
        <div class="data-card-value" id="subc4-v"><span class="tag-unavail">[DATA UNAVAILABLE]</span> Specific amount not fully presented in current report version</div>
        <div class="data-card-note" id="subc4-n">Report confirms data exists; specific value not fully displayed â€” flagged per Missing Data Protocol, no estimation performed</div>
        <div class="data-source" id="subc4-s">Source: User-provided research report (specific value pending verification)</div>
      </div>
    </div>
    <div id="substitutes-adapt" style="margin-top:14px"></div>
  </div>

  <!-- â”€â”€ SCORING â”€â”€ -->
  <div class="tab-content" id="content-scoring">
    <div style="margin-bottom:16px;display:flex;align-items:center;gap:10px">
      <div style="font-size:26px">ğŸ“Š</div>
      <div>
        <div class="force-name" id="sc-title" style="margin-bottom:2px">Score Board</div>
        <div style="font-size:11px;color:var(--muted);font-weight:600" id="sc-sub">Scoring basis: Your decisions + User-provided research report data</div>
      </div>
    </div>
    <div id="scoreNotice" class="data-notice">âš ï¸ <span id="score-notice-txt">Please complete all five settings in "My Business Plan" on the left to generate scores.</span></div>
    <div id="scoringContent" style="display:none">
      <div class="scoring-grid" id="scoreCards"></div>
      <div id="feedbackBox"></div>
      <div id="socraticSection"></div>
    </div>
  </div>

  <!-- â”€â”€ REPORT â”€â”€ -->
  <div class="tab-content" id="content-report">
    <div style="margin-bottom:16px;display:flex;align-items:center;gap:10px">
      <div style="font-size:26px">ğŸ“„</div>
      <div>
        <div class="force-name" id="rp-title" style="margin-bottom:2px">Restaurant Profit Analysis Report</div>
        <div style="font-size:11px;color:var(--muted);font-weight:600" id="rp-sub">Includes Five Forces scores, Socratic dialogue log &amp; Hallucination Log (MBA submission ready)</div>
      </div>
    </div>
    <div class="data-notice">âš ï¸ <span id="rp-notice">All report data sourced from user-provided research report; all conclusions traceable to specific report data points</span></div>
    <button class="generate-btn" onclick="generateReport()">ğŸ³ <span id="gen-btn-txt">Generate Report</span></button>
    <div id="reportContent" style="margin-top:20px"></div>
    <div id="halLog" style="margin-top:22px"></div>
  </div>

</div><!-- end right -->
</div><!-- end main -->
</div><!-- end app -->

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-header">
      <div class="modal-title" id="modalTitle">Score Basis</div>
      <button class="modal-close" onclick="closeModal()">âœ•</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// BILINGUAL STRINGS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const LANG = {
  en: {
    title:'Restaurant Profit Simulator', sub:'Porter\'s Five Forces Â· HK F&B 2024â€“2026',
    pTitle:'My Business Plan', pDesc:'Set decisions â†’ instant Five Forces update',
    lBudget:'â‘  Initial Budget', lCost:'â‘¡ Cost Allocation', lComp:'â‘¢ Core Competency', lLocSeg:'â‘£ Location & Target Segment',
    llLoc:'Location', llSeg:'Target Segment',
    bLow:'HK$100Kâ€“500K (Light asset entry)', bMid:'HK$500Kâ€“1M (Mid-scale standard)', bHigh:'HK$1M+ (Scaled investment)',
    cFoodheavy:'Food-heavy (Food 45% / Rent 30% / Fitout 25%)', cBalanced:'Balanced (Food 35% / Rent 35% / Fitout 30%)', cAmbiance:'Ambiance-heavy (Food 25% / Rent 25% / Fitout 50%)',
    compSig:'ğŸ½ï¸ Signature Dishes (Differentiation)', compVal:'ğŸ’ Value-for-Money (Mass market)', compLux:'âœ¨ Premium Ambiance (Experience premium)', compSup:'ğŸ”— Exclusive Supply Chain (Cost moat)',
    locCom:'ğŸ˜ï¸ Community', locCBD:'ğŸ™ï¸ Commercial', segMass:'ğŸ‘¥ Mass', segPrem:'ğŸŒŸ Premium',
    clFood:'Food & Ingredients', clRent:'Rent', clFitout:'Fitout & Renovation',
    ssLabel:'PROFIT SCORE', scoreVerdictInit:'Complete setup to see score',
    ffS:'Supplier Power', ffB:'Buyer Power', ffE:'New Entrants', ffSub:'Substitutes', ffR:'Rivalry',
    tabR:'Rivalry', tabE:'New Entrants', tabS:'Suppliers', tabB:'Buyers', tabSub:'Substitutes', tabSc:'Score Board', tabRp:'Report',
    fnRivals:'Rivalry Among Existing Competitors', fnEntrants:'Threat of New Entrants', fnSuppliers:'Bargaining Power of Suppliers', fnBuyers:'Bargaining Power of Buyers', fnSubs:'Threat of Substitutes',
    dnRivals:'All data sourced from: User-provided research report (HK F&B Porter\'s Five Forces Strategic Research Report, 2024â€“2026)',
    scTitle:'Score Board', scSub:'Scoring basis: Your decisions + User-provided research report data',
    scoreNoticeTxt:'Please complete all five settings in "My Business Plan" on the left to generate scores.',
    rpTitle:'Restaurant Profit Analysis Report', rpSub:'Includes Five Forces scores, Socratic dialogue log & Hallucination Log (MBA submission ready)',
    rpNotice:'All report data sourced from user-provided research report; all conclusions traceable to specific report data points',
    genBtnTxt:'Generate Report',
    scoreSrc:'Scoring basis: User decisions + User-provided research report data',
    // Verdicts
    v80:'Profitability Very High âœ¦', v60:'Profitability Moderate â—†', v40:'Profitability Low â–²',
    fb80Title:'Score {n} â€” Profitability Very High',
    fb80:'Five Forces overall weak; decision-strategy fit is high. Supplier cost volatility moderate (food CPI +0.7%); differentiated positioning effectively offsets high buyer bargaining power; competitor landscape shows structural growth opportunity in non-Chinese segment (+4.0%).',
    fb60Title:'Score {n} â€” Moderate Profitability Â· Optimise Key Decisions',
    fb40Title:'Score {n} â€” Low Profitability',
    fbSrc:'Scoring basis: User decisions + Research report data (C&SD / FEHD / Knight Frank / USDA FAS)',
    socLabel:'Socratic Guided Question Â·',
    socSrcNote:'Question basis: User-provided research report data | Record usable for MBA Socratic dialogue submission',
    socPlaceholder:'Enter your response hereâ€¦ (will be saved to dialogue log)',
    socSubmit:'Submit â†’',
    socAILabel:'AI Guidance (Based on Research Report):',
    socSaved:'âœ“ This dialogue has been logged for MBA submission',
    // Socratic questions
    socQ:{
      high:'Your decision set achieved a high score, yet the report shows industry receipt volume still fell âˆ’0.9% in 2025, and northbound departures surged from 53.6M (2023) to 87.1M (2025). Combining the report\'s "structural demand leakage" (Buyers) and "first annual net outlet contraction" (Rivalry), how might these two macro-structural forces affect your actual profitability forecast â€” even when the Five Forces combination appears favourable?',
      medium:'Per the research report, one key driver of high buyer bargaining power is KeeTa\'s 44% market share capture through aggressive subsidies, pushing platform penetration to 38% and conditioning consumers to discount-driven behaviour. Do you think shifting your core competency (e.g. from value-for-money to signature dish differentiation) could meaningfully reduce the Buyer Power score? How would this adjustment linkage affect the Rivalry score?',
      low:'The report shows: Chinese restaurants\' receipt volume fell âˆ’4.3% in 2025 while non-Chinese grew +4.0%; standard platform commission is 30%, forcing 40â€“50% menu price markups for delivery viability. Given your current score, can your chosen budget and competency combination realistically achieve break-even under dual pressure from high Buyer Power (northbound leakage + discount habits) and high Rivalry (net outlet contraction)?'
    },
    socResp:{
      high:'You\'ve identified the core limitation of the Five Forces framework: it analyses "competitive structure," not "demand scale." Even with a favourable Five Forces combination, if aggregate market demand continues to structurally shrink (northbound departures: 53.6M â†’ 87.1M), profitability forecasts must incorporate total market volume data (report: nominal +0.2% but real volume âˆ’0.9%). The key follow-up: does your location and target segment precisely align with an identifiable growth sub-segment within the data (e.g. non-Chinese, premium positioning) â€” rather than competing in the shrinking mass market?',
      medium:'Your analytical direction is correct. Differentiation (signature dishes) can reduce buyer price sensitivity, thereby lowering the Buyer Power score. But the report\'s data signals a linkage effect: if your differentiation succeeds in attracting premium customers, existing competitors may adjust strategies to follow suit â€” potentially keeping Rivalry scores elevated rather than reduced. Additionally, the 30% platform commission structural problem persists regardless of your positioning choice. Which Five Forces dimension improvement would have the highest leverage effect on your composite profit score?',
      low:'You\'ve identified the core contradiction. The report supports: with both Buyer Power (northbound + delivery) and Rivalry (net contraction + volume decline) at high levels, achieving break-even becomes structurally difficult. The industry average margin is already ~23% (vs. Vietnam 38%), indicating structural pressure beyond individual decision optimisation. Two report-supported optimisation paths: â‘  "Exclusive Supply Chain" â€” systematically lowers Supplier score and builds a defensible moat; â‘¡ "Signature dishes + Premium + Commercial" â€” aligns with the non-Chinese growth sub-segment (+4.0%). Which path better matches your actual resource capability?'
    },
    socType:{high:'Linked Thinking',medium:'Decision Optimisation',low:'Logic Verification'},
    // Score card labels
    scardS:'Supplier Bargaining Power', scardB:'Buyer Bargaining Power', scardE:'New Entrant Threat', scardSub:'Substitute Threat', scardR:'Rivalry Intensity',
    clickBasis:'(click to view full basis)',
    // Report sections
    rpS1:'I. Business Plan Settings', rpS2:'II. Porter\'s Five Forces Scores (Basis: User-provided research report)',
    rpS3:'III. Industry Attractiveness Summary (Direct quote from research report)',
    rpS4:'IV. Structural Risks (From research report)',
    rpS5:'V. Socratic Dialogue Log (MBA Submission)',
    rpS6:'VI. Data Source Summary Table',
    halTitle:'Hallucination Log â€” Self-Audit Record (MBA Submission)',
    // Report table headers
    thSetting:'Setting', thValue:'Selected Value', thDimension:'Dimension', thScore:'Score (/10)', thWeight:'Weight', thContrib:'Weighted Contribution', thIntensity:'Intensity',
    thType:'Type', thQ:'AI Question (excerpt)', thA:'User Response (excerpt)', thG:'AI Guidance (excerpt)', thTime:'Time',
    thInstitution:'Institution', thDoc:'Report / Document', thPeriod:'Reference Period',
    // Verdicts for table
    vHigh:'High', vMid:'Medium', vLow:'Low',
    // Budget labels
    bLLow:'HK$100Kâ€“500K', bLMid:'HK$500Kâ€“1M', bLHigh:'HK$1M+',
    cLFoodheavy:'Food-heavy (Food 45% / Rent 30% / Fitout 25%)', cLBalanced:'Balanced (Food 35% / Rent 35% / Fitout 30%)', cLAmbiance:'Ambiance-heavy (Food 25% / Rent 25% / Fitout 50%)',
    compLSig:'Signature Dishes', compLVal:'Value-for-Money', compLLux:'Premium Ambiance', compLSup:'Exclusive Supply Chain',
    locLCom:'Community', locLCBD:'Commercial', segLMass:'Mass', segLPrem:'Premium',
    // Overall verdict
    profHigh:'Profitability Very High', profMid:'Profitability Moderate', profLow:'Profitability Low',
    // Industry summary
    industrySummary:'The Hong Kong licensed restaurant industry currently exhibits very low attractiveness due to the irreversible leakage of consumer demand to Mainland China and the severe profit margin compression caused by rigid labor costs and dominant delivery platform commissions.',
    inSumSrc:'Source: User-provided research report â€” Industry Attractiveness Summary (direct quote)',
    risk1Label:'Risk 1: Permanent Cross-Border Demand Leakage', risk1:'Departures surged to 87.1M in 2025 (2023: 53.6M); trade bodies describe this as "totally irreversible"',
    risk1Src:'Source: SCMP Research / Official data (as cited in research report)',
    risk2Label:'Risk 2: Labour Cost vs. Sector Profitability Imbalance', risk2:'HK F&B average profit margin 23% (Vietnam: 38%); F&B unemployment rose to 6.4% mid-2025 yet premium wages still required',
    risk2Src:'Source: Restroworks (as cited in research report)',
    risk3Label:'Risk 3: Delivery Platform Margin Erosion', risk3:'Standard commission ~30%; restaurants must mark up delivery menus 40â€“50%, long-term damaging brand loyalty',
    risk3Src:'Source: Industry survey (as cited in research report)',
    socNoRecord:'No Socratic dialogue recorded yet â€” please complete the guided question interaction in the Score Board tab first',
    reportDate:'Report generated:', dataNote:'Sole data basis: User-provided research report',
    // Hallucination log entries
    hal1Label:'âœ“ Verified â€” Data Integrity', hal1:'All core Five Forces data points (87.1M northbound departures, HK$109.6B market size, âˆ’0.9% volume decline, 38% delivery penetration, 30% platform commission, 95% import dependency, +0.7% CPI, 26% first-year failure rate, âˆ’0.5% commercial rent change, HK$433M Fairwood PP&E) fully correspond to research report stated data. No data beyond report scope used.',
    hal2Label:'âš  Flagged â€” [DATA UNAVAILABLE] Items', hal2:'Substitutes dimension: supermarket cooked food sales figure (2023) and food e-commerce revenue forecast (2025) not fully presented in current report version â€” flagged per Missing Data Protocol. No estimation performed.',
    hal3Label:'âœ“ Verified â€” Scope Compliance', hal3:'Delivery penetration rate (38%) and KeeTa market share (44%) correctly assigned to "Bargaining Power of Buyers" (Module 4), not Substitutes (Module 5). Consistent with report definition: delivery is an internal restaurant channel, not a substitute.',
    hal4Label:'âœ“ Verified â€” Source Attribution', hal4:'All data attributed to specific institutions and report titles (C&SD, FEHD, USDA FAS, Knight Frank, Fairwood Annual Report, PBOC Shenzhen). No "online sources", "publicly available data" or unattributable citations used.',
    hal5Label:'âœ“ Verified â€” Scoring Logic', hal5:'All Five Forces scores calibrated to report intensity rating standard (High / Medium / Low per defined conditions). Score adjustment logic strictly maps to user decisions and report data. No scoring scenarios beyond report scope created.',
    // Adapt card labels
    adCompRival:'Competition-Positioning Alignment', adLocEntry:'Location Ã— Entry Barrier Alignment', adSupply:'Competency Ã— Supplier Alignment', adBuyer:'Segment Ã— Buyer Power Alignment', adSub:'Segment Ã— Substitute Alignment',
    noticeReport:'Please complete all Business Plan settings before generating report.',
    // Modal labels
    modalScoreLabel:'Five Forces Score', modalWeightLabel:'Current Weight', modalBasisLabel:'Full Scoring Basis (Source: User-provided research report)',
    modalCriteriaLabel:'Intensity Rating Criteria', modalCriteriaText:'Per research report: High (â‰¥3 data points indicate strong pressure), Medium (mixed signals), Low (â‰¥3 data points indicate weak pressure). All scores fully traceable to report data.',
    modalSrcDecl:'Scoring basis: User decisions + User-provided research report (HK F&B Porter\'s Five Forces Strategic Research Report, 2024â€“2026)',
    // Score badge
    badgeLabel:'Score'
  },
  zh: {
    title:'é–‹é¤å»³ç›ˆåˆ©å¯èƒ½æ€§åˆ†æ', sub:'æ³¢ç‰¹äº”åŠ›æ¨¡æ“¬å·¥å…· Â· é¦™æ¸¯é£²é£Ÿæ¥­ 2024â€“2026',
    pTitle:'æˆ‘çš„åŸºæœ¬ç›¤', pDesc:'å®Œæˆè¨­ç½®å¾Œå³æ™‚è¯å‹•äº”åŠ›åˆ†æ',
    lBudget:'â‘  åˆå§‹é ç®—', lCost:'â‘¡ æˆæœ¬åˆ†é…', lComp:'â‘¢ æ ¸å¿ƒç«¶çˆ­åŠ›', lLocSeg:'â‘£ é¸å€ ï¼† ç›®æ¨™å®¢ç¾¤',
    llLoc:'é¸å€', llSeg:'ç›®æ¨™å®¢ç¾¤',
    bLow:'HK$10è¬â€“50è¬ï¼ˆè¼•è³‡ç”¢å…¥å ´ï¼‰', bMid:'HK$50è¬â€“100è¬ï¼ˆä¸­å‹æ¨™æº–ï¼‰', bHigh:'HK$100è¬ä»¥ä¸Šï¼ˆè¦æ¨¡åŒ–æŠ•å…¥ï¼‰',
    cFoodheavy:'é£Ÿæåé‡å‹ï¼ˆé£Ÿæ45% / ç§Ÿé‡‘30% / è£ä¿®25%ï¼‰', cBalanced:'å‡è¡¡é…ç½®å‹ï¼ˆé£Ÿæ35% / ç§Ÿé‡‘35% / è£ä¿®30%ï¼‰', cAmbiance:'ç’°å¢ƒåé‡å‹ï¼ˆé£Ÿæ25% / ç§Ÿé‡‘25% / è£ä¿®50%ï¼‰',
    compSig:'ğŸ½ï¸ ç‰¹è‰²èœå“ï¼ˆå·®ç•°åŒ–å®šä½ï¼‰', compVal:'ğŸ’ æ€§åƒ¹æ¯”ï¼ˆå¤§çœ¾æ¶ˆè²»å°å‘ï¼‰', compLux:'âœ¨ é«˜ç«¯è£ä¿®ï¼ˆç’°å¢ƒé«”é©—æº¢åƒ¹ï¼‰', compSup:'ğŸ”— ç¨å®¶é£Ÿæä¾›æ‡‰éˆï¼ˆæˆæœ¬è­·åŸæ²³ï¼‰',
    locCom:'ğŸ˜ï¸ ç¤¾å€', locCBD:'ğŸ™ï¸ å•†åœˆ', segMass:'ğŸ‘¥ å¤§çœ¾', segPrem:'ğŸŒŸ ä¸­é«˜ç«¯',
    clFood:'é£Ÿææ¡è³¼', clRent:'ç§Ÿé‡‘', clFitout:'è£ä¿®',
    ssLabel:'ç¶œåˆç›ˆåˆ©è©•åˆ†', scoreVerdictInit:'è«‹å®ŒæˆåŸºæœ¬ç›¤è¨­ç½®',
    ffS:'ä¾›æ‡‰å•†è­°åƒ¹èƒ½åŠ›', ffB:'è³¼è²·è€…è­°åƒ¹èƒ½åŠ›', ffE:'æ–°é€²å…¥è€…å¨è„…', ffSub:'æ›¿ä»£å“å¨è„…', ffR:'ç¾æœ‰ç«¶çˆ­è€…å¼·åº¦',
    tabR:'ç¾æœ‰ç«¶çˆ­è€…', tabE:'æ–°é€²å…¥è€…', tabS:'ä¾›æ‡‰å•†', tabB:'è³¼è²·è€…', tabSub:'æ›¿ä»£å“', tabSc:'è©•åˆ†çœ‹æ¿', tabRp:'åˆ†æå ±å‘Š',
    fnRivals:'ç¾æœ‰ç«¶çˆ­è€…ç«¶çˆ­å¼·åº¦', fnEntrants:'æ–°é€²å…¥è€…å¨è„…', fnSuppliers:'ä¾›æ‡‰å•†è­°åƒ¹èƒ½åŠ›', fnBuyers:'è³¼è²·è€…è­°åƒ¹èƒ½åŠ›', fnSubs:'æ›¿ä»£å“å¨è„…',
    dnRivals:'âš  ä»¥ä¸‹æ‰€æœ‰æ•¸æ“šä¾†æºï¼šç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šæ•¸æ“šï¼ˆé¦™æ¸¯æŒç‰Œé£²é£Ÿæ¥­æ³¢ç‰¹äº”åŠ›åˆ†æå ±å‘Šï¼Œ2024â€“2026ï¼‰',
    scTitle:'ç¶œåˆè©•åˆ†çœ‹æ¿', scSub:'è©•åˆ†ä¾æ“šï¼šç”¨æˆ¶æ±ºç­– ï¼‹ ç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šæ•¸æ“š',
    scoreNoticeTxt:'è«‹å…ˆå®Œæˆå·¦å´ã€Œæˆ‘çš„åŸºæœ¬ç›¤ã€æ‰€æœ‰äº”é …è¨­ç½®ï¼Œç³»çµ±å°‡è‡ªå‹•ç”Ÿæˆäº”åŠ›è©•åˆ†åŠç›ˆåˆ©åé¥‹ã€‚',
    rpTitle:'é–‹é¤å»³ç›ˆåˆ©åˆ†æå ±å‘Š', rpSub:'å«äº”åŠ›è©•åˆ†ã€è˜‡æ ¼æ‹‰åº•å°è©±è¨˜éŒ„åŠå¹»è¦ºè‡ªæŸ¥æ—¥èªŒï¼ˆMBAä½œæ¥­äº¤ä»˜ï¼‰',
    rpNotice:'æ‰€æœ‰å ±å‘Šæ•¸æ“šå‡æºæ–¼ç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šï¼›è©•åˆ†ä¾æ“šç‚ºå ±å‘Šäº”åŠ›è©•åˆ†æ¨™æº–ï¼›æ‰€æœ‰çµè«–å¯è¿½æº¯è‡³å ±å‘Šå…·é«”æ•¸æ“š',
    genBtnTxt:'ç”Ÿæˆåˆ†æå ±å‘Š',
    scoreSrc:'è©•åˆ†ä¾æ“šï¼šç”¨æˆ¶æ±ºç­– ï¼‹ ç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šæ•¸æ“š',
    v80:'ç›ˆåˆ©å¯èƒ½æ€§æ¥µé«˜ âœ¦', v60:'ç›ˆåˆ©å¯èƒ½æ€§ä¸­ç­‰ â—†', v40:'ç›ˆåˆ©å¯èƒ½æ€§è¼ƒä½ â–²',
    fb80Title:'ç¶œåˆç›ˆåˆ©è©•åˆ† {n} â€” ç›ˆåˆ©å¯èƒ½æ€§æ¥µé«˜',
    fb80:'äº”åŠ›æ•´é«”åå¼±ï¼Œæ±ºç­–èˆ‡å¸‚å ´ç’°å¢ƒåŒ¹é…åº¦é«˜ã€‚ä¾›æ‡‰å•†æˆæœ¬æ³¢å‹•æº«å’Œï¼ˆé£Ÿå“CPI +0.7%ï¼‰ï¼Œå·®ç•°åŒ–å®šä½æœ‰æ•ˆå°æ²–è³¼è²·è€…é«˜è­°åƒ¹å£“åŠ›ï¼Œç«¶çˆ­è€…æ ¼å±€åœ¨çµæ§‹é‡å¡‘ä¸­å‡ºç¾ä¸­é«˜ç«¯ç´°åˆ†æ©Ÿæœƒï¼ˆéä¸­å¼é€†å¢+4.0%ï¼‰ã€‚',
    fb60Title:'ç¶œåˆè©•åˆ† {n} â€” ç›ˆåˆ©å¯èƒ½æ€§ä¸­ç­‰ï¼Œéœ€å„ªåŒ–éƒ¨åˆ†æ±ºç­–',
    fb40Title:'ç¶œåˆè©•åˆ† {n} â€” ç›ˆåˆ©å¯èƒ½æ€§è¼ƒä½',
    fbSrc:'è©•åˆ†ä¾æ“šï¼šç”¨æˆ¶æ±ºç­– ï¼‹ èª¿ç ”å ±å‘Šäº”åŠ›æ•¸æ“šï¼ˆæ”¿åºœçµ±è¨ˆè™•/FEHD/Knight Frank/ç¾è¾²éƒ¨ï¼‰',
    socLabel:'è˜‡æ ¼æ‹‰åº•å¼å¼•å°æå• Â·',
    socSrcNote:'æå•ä¾æ“šï¼šç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šæ•¸æ“š | è¨˜éŒ„å¯ç”¨æ–¼MBAè˜‡æ ¼æ‹‰åº•å°è©±äº¤ä»˜ç‰©',
    socPlaceholder:'è«‹è¼¸å…¥æ‚¨çš„æ€è€ƒå›æ‡‰â€¦ï¼ˆå›æ‡‰å°‡å­˜å…¥å°è©±è¨˜éŒ„ï¼‰',
    socSubmit:'æäº¤å›æ‡‰ â†’',
    socAILabel:'AIå¼•å°å›æ‡‰ï¼ˆä¾æ“šï¼šèª¿ç ”å ±å‘Šæ•¸æ“šï¼‰ï¼š',
    socSaved:'âœ“ æœ¬å°è©±å·²ç´å…¥è˜‡æ ¼æ‹‰åº•å°è©±å­˜æª”ï¼Œå¯ç”¨æ–¼MBAä½œæ¥­äº¤ä»˜',
    socQ:{
      high:'æ‚¨çš„æ±ºç­–å–å¾—è¼ƒé«˜è©•åˆ†ï¼Œä½†å ±å‘Šæ•¸æ“šé¡¯ç¤ºé¦™æ¸¯2025å¹´å…¨è¡Œæ¥­å¯¦éš›æ”¶è²¨é‡ä»ä¸‹è·Œ0.9%ï¼Œä¸”åŒ—ä¸Šæ¶ˆè²»å‡ºè¡Œé‡å¾2023å¹´çš„5,360è¬æ€¥å‡è‡³8,710è¬äººæ¬¡ã€‚çµåˆå ±å‘Šä¸­è³¼è²·è€…ç¶­åº¦çš„ã€Œçµæ§‹æ€§éœ€æ±‚æµå¤±ã€èˆ‡ç«¶çˆ­è€…ç¶­åº¦çš„ã€Œç¶²é»é¦–æ¬¡å¹´åº¦æ·¨æ”¶ç¸®ã€ï¼Œæ‚¨èªç‚ºå³ä½¿äº”åŠ›çµ„åˆåå¼±ï¼Œé€™å…©å€‹å®è§€çµæ§‹æ€§å› ç´ å¦‚ä½•å¯èƒ½å½±éŸ¿æ‚¨çš„å¯¦éš›ç›ˆåˆ©é æ¸¬ï¼Ÿ',
      medium:'æ ¹æ“šèª¿ç ”å ±å‘Šæ•¸æ“šï¼Œè³¼è²·è€…è­°åƒ¹èƒ½åŠ›è©•åˆ†åé«˜çš„æ ¸å¿ƒåŸå› ä¹‹ä¸€æ˜¯KeeTaä»¥ç©æ¥µè£œè²¼ä½”æ“šå¤–è³£å¸‚å ´44%ä»½é¡ï¼Œä»¤æ¶ˆè²»è€…å½¢æˆæŠ˜æ‰£é©…å‹•æ¶ˆè²»ç¿’æ…£ï¼ˆæ»²é€ç‡38%ï¼‰ã€‚æ‚¨èªç‚ºèª¿æ•´æ ¸å¿ƒç«¶çˆ­åŠ›è¨­ç½®ï¼ˆä¾‹å¦‚å¾æ€§åƒ¹æ¯”è½‰å‘ç‰¹è‰²èœå“å·®ç•°åŒ–ï¼‰ï¼Œèƒ½å¦æœ‰æ•ˆé™ä½è³¼è²·è€…è­°åƒ¹èƒ½åŠ›è©•åˆ†ï¼Ÿé€™ä¸€èª¿æ•´æœƒå¦‚ä½•è¯å‹•å½±éŸ¿ç¾æœ‰ç«¶çˆ­è€…ç«¶çˆ­å¼·åº¦çš„è©•åˆ†ï¼Ÿ',
      low:'å ±å‘Šæ•¸æ“šé¡¯ç¤ºï¼šä¸­å¼é¤å»³2025å¹´æ”¶è²¨é‡æŒ‰å¹´è·Œ4.3%ï¼Œè€Œéä¸­å¼é€†å¢4.0%ï¼›å¤–è³£å¹³å°æ¨™æº–ä½£é‡‘ç‡30%ï¼Œç¶­æŒå¤–è³£æ¥­å‹™é ˆåŠ åƒ¹40â€“50%ã€‚çµåˆç•¶å‰è©•åˆ†ï¼Œæ‚¨èªç‚ºç¾æœ‰çš„é ç®—èˆ‡æ ¸å¿ƒç«¶çˆ­åŠ›çµ„åˆï¼Œèƒ½å¦åœ¨ã€Œè³¼è²·è€…è­°åƒ¹èƒ½åŠ›é«˜ï¼ˆåŒ—ä¸Šåˆ†æµ+æŠ˜æ‰£ç¿’æ…£ï¼‰ã€èˆ‡ã€Œç«¶çˆ­è€…å¼·åº¦é«˜ï¼ˆç¶²é»æ·¨æ”¶ç¸®ï¼‰ã€çš„é›™é‡å£“åŠ›ä¸‹å¯¦ç¾ç›ˆè™§å¹³è¡¡ï¼Ÿ'
    },
    socResp:{
      high:'æ‚¨çš„æ€è€ƒè§¸åŠäº†æ³¢ç‰¹äº”åŠ›æ¨¡å‹çš„æ ¸å¿ƒå±€é™æ€§ï¼šäº”åŠ›åˆ†æè©•ä¼°çš„æ˜¯ã€Œç«¶çˆ­æ ¼å±€ã€è€Œéã€Œéœ€æ±‚è¦æ¨¡ã€ã€‚å³ä½¿åœ¨äº”åŠ›åå¼±çš„çµ„åˆä¸‹ï¼Œè‹¥æ•´é«”å¸‚å ´éœ€æ±‚æŒçºŒçµæ§‹æ€§æµå¤±ï¼ˆå ±å‘Šï¼šåŒ—ä¸Šå‡ºè¡Œå¾5,360è¬å¢è‡³8,710è¬äººæ¬¡ï¼‰ï¼Œç›ˆåˆ©é æ¸¬ä»éœ€çµåˆå¸‚å ´ç¸½é‡æ•¸æ“šä¿®æ­£ã€‚å ±å‘ŠåŒæ™‚é¡¯ç¤ºéä¸­å¼ç´°åˆ†é€†å¢+4.0%ï¼Œèªªæ˜å¸‚å ´å…§éƒ¨å­˜åœ¨çµæ§‹æ€§æ©Ÿæœƒã€‚ä¸‹ä¸€æ­¥æ€è€ƒï¼šæ‚¨çš„é¸å€èˆ‡ç›®æ¨™å®¢ç¾¤è¨­å®šï¼Œæ˜¯å¦ç²¾æº–å°é½Šäº†é€™å€‹å¢é•·å­é›†ï¼Ÿ',
      medium:'æ‚¨çš„åˆ†ææ¡†æ¶æ­£ç¢ºã€‚å·®ç•°åŒ–ç­–ç•¥ï¼ˆç‰¹è‰²èœå“ï¼‰å¯é™ä½è³¼è²·è€…å°æŠ˜æ‰£çš„æ•æ„Ÿåº¦ï¼Œé€²è€Œé™ä½å…¶è­°åƒ¹èƒ½åŠ›è©•åˆ†ã€‚ä½†å ±å‘Šæ•¸æ“šæç¤ºè¯å‹•æ•ˆæ‡‰ï¼šè‹¥å·®ç•°åŒ–å®šä½æˆåŠŸï¼Œç¾æœ‰ç«¶çˆ­è€…å¯èƒ½èª¿æ•´ç­–ç•¥è·Ÿé€²ï¼Œä½¿ç«¶çˆ­å¼·åº¦è©•åˆ†ä¸é™åå‡ã€‚æ­¤å¤–ï¼Œå ±å‘Šæ˜ç¢ºæŒ‡å‡ºå¤–è³£ä½£é‡‘30%çš„çµæ§‹å•é¡Œèˆ‡å®šä½é¸æ“‡ç„¡é—œã€‚æ‚¨èªç‚ºå“ªå€‹äº”åŠ›ç¶­åº¦çš„æ”¹å–„ï¼Œå°æå‡ç¶œåˆç›ˆåˆ©è©•åˆ†å…·æœ‰æœ€å¤§æ§“æ¡¿æ•ˆæ‡‰ï¼Ÿ',
      low:'æ‚¨è­˜åˆ¥äº†æ ¸å¿ƒçŸ›ç›¾ã€‚å ±å‘Šæ•¸æ“šæ”¯æŒï¼šåœ¨è³¼è²·è€…ï¼ˆåŒ—ä¸Š+å¤–è³£ï¼‰èˆ‡ç«¶çˆ­è€…ï¼ˆç¶²é»æ·¨æ”¶ç¸®+é‡è·Œï¼‰é›™é‡å£“åŠ›ä¸‹ï¼Œç›ˆè™§å¹³è¡¡é›£åº¦é¡¯è‘—ä¸Šå‡ã€‚è¡Œæ¥­å¹³å‡åˆ©æ½¤ç‡å·²ä½è‡³23%ï¼ˆé ä½æ–¼è¶Šå—38%ï¼‰ï¼Œèªªæ˜æ•´é«”çµæ§‹æ€§å£“åŠ›å·²è¶…è¶Šå€‹é«”æ±ºç­–å¯å„ªåŒ–çš„ç¯„åœã€‚å…©æ¢å ±å‘Šæ•¸æ“šæ”¯æ’çš„å„ªåŒ–è·¯å¾‘ï¼šâ‘ ã€Œç¨å®¶é£Ÿæä¾›æ‡‰éˆã€é™ä½ä¾›æ‡‰å•†è©•åˆ†ä¸¦å»ºç«‹å£å£˜ï¼›â‘¡ã€Œç‰¹è‰²èœå“+ä¸­é«˜ç«¯+å•†åœˆã€å°é½Šéä¸­å¼å¢é•·ç´°åˆ†ã€‚å“ªæ¢è·¯å¾‘æ›´ç¬¦åˆæ‚¨çš„å¯¦éš›è³‡æºèƒ½åŠ›ï¼Ÿ'
    },
    socType:{high:'è¯å‹•æ€è€ƒé¡',medium:'æ±ºç­–å„ªåŒ–é¡',low:'é‚è¼¯æ ¸æŸ¥é¡'},
    scardS:'ä¾›æ‡‰å•†è­°åƒ¹èƒ½åŠ›', scardB:'è³¼è²·è€…è­°åƒ¹èƒ½åŠ›', scardE:'æ–°é€²å…¥è€…å¨è„…', scardSub:'æ›¿ä»£å“å¨è„…', scardR:'ç¾æœ‰ç«¶çˆ­è€…ç«¶çˆ­å¼·åº¦',
    clickBasis:'ï¼ˆé»æ“ŠæŸ¥çœ‹å®Œæ•´ä¾æ“šï¼‰',
    rpS1:'ä¸€ã€åŸºæœ¬ç›¤è¨­ç½®', rpS2:'äºŒã€æ³¢ç‰¹äº”åŠ›è©•åˆ†ï¼ˆä¾æ“šï¼šç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šæ•¸æ“šï¼‰',
    rpS3:'ä¸‰ã€è¡Œæ¥­å¸å¼•åŠ›ç¸½çµï¼ˆå¼•è‡ªèª¿ç ”å ±å‘ŠåŸæ–‡ï¼‰',
    rpS4:'å››ã€çµæ§‹æ€§é¢¨éšªï¼ˆå¼•è‡ªèª¿ç ”å ±å‘Šï¼‰',
    rpS5:'äº”ã€è˜‡æ ¼æ‹‰åº•å°è©±è¨˜éŒ„ï¼ˆMBAä½œæ¥­äº¤ä»˜ï¼‰',
    rpS6:'å…­ã€æ•¸æ“šä¾†æºå½™ç¸½è¡¨',
    halTitle:'Hallucination Log â€” å¹»è¦ºè‡ªæŸ¥è¨˜éŒ„ï¼ˆMBAä½œæ¥­äº¤ä»˜ï¼‰',
    thSetting:'è¨­ç½®é …', thValue:'é¸æ“‡å€¼', thDimension:'ç¶­åº¦', thScore:'è©•åˆ†ï¼ˆ/10ï¼‰', thWeight:'æ¬Šé‡', thContrib:'åŠ æ¬Šè²¢ç»', thIntensity:'å¼·åº¦è©•å®š',
    thType:'é¡å‹', thQ:'AIæå•ï¼ˆæ‘˜è¦ï¼‰', thA:'ç”¨æˆ¶å›æ‡‰ï¼ˆæ‘˜è¦ï¼‰', thG:'AIå¼•å°ï¼ˆæ‘˜è¦ï¼‰', thTime:'æ™‚é–“',
    thInstitution:'æ©Ÿæ§‹', thDoc:'å ±å‘Š/æ–‡ä»¶åç¨±', thPeriod:'åƒè€ƒæœŸ',
    vHigh:'é«˜ High', vMid:'ä¸­ Medium', vLow:'ä½ Low',
    bLLow:'HK$10è¬â€“50è¬', bLMid:'HK$50è¬â€“100è¬', bLHigh:'HK$100è¬ä»¥ä¸Š',
    cLFoodheavy:'é£Ÿæåé‡å‹ï¼ˆé£Ÿæ45%/ç§Ÿé‡‘30%/è£ä¿®25%ï¼‰', cLBalanced:'å‡è¡¡é…ç½®å‹ï¼ˆé£Ÿæ35%/ç§Ÿé‡‘35%/è£ä¿®30%ï¼‰', cLAmbiance:'ç’°å¢ƒåé‡å‹ï¼ˆé£Ÿæ25%/ç§Ÿé‡‘25%/è£ä¿®50%ï¼‰',
    compLSig:'ç‰¹è‰²èœå“', compLVal:'æ€§åƒ¹æ¯”', compLLux:'é«˜ç«¯è£ä¿®', compLSup:'ç¨å®¶é£Ÿæä¾›æ‡‰éˆ',
    locLCom:'ç¤¾å€', locLCBD:'å•†åœˆ', segLMass:'å¤§çœ¾', segLPrem:'ä¸­é«˜ç«¯',
    profHigh:'ç›ˆåˆ©å¯èƒ½æ€§æ¥µé«˜', profMid:'ç›ˆåˆ©å¯èƒ½æ€§ä¸­ç­‰', profLow:'ç›ˆåˆ©å¯èƒ½æ€§è¼ƒä½',
    industrySummary:'é¦™æ¸¯æŒç‰Œé¤é£²æ¥­ç›®å‰æ•´é«”å¸å¼•åŠ›åä½ï¼Œä¸»è¦é©…å‹•å› ç´ ç‚ºï¼šæ¶ˆè²»è€…éœ€æ±‚ä¸å¯é€†åœ°æµå‘å…§åœ°å¸‚å ´ï¼Œä»¥åŠå‰›æ€§å‹å·¥æˆæœ¬å’Œå¤–è³£å¹³å°ä½£é‡‘é€ æˆçš„åš´é‡åˆ©æ½¤å£“ç¸®ã€‚',
    inSumSrc:'ä¾†æºï¼šç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Š â€” Industry Attractiveness Summaryï¼ˆåŸæ–‡ç›´å¼•ï¼‰',
    risk1Label:'é¢¨éšªä¸€ï¼šåŒ—ä¸Šæ¶ˆè²»éœ€æ±‚æ°¸ä¹…æµå¤±', risk1:'2025å¹´å‡ºè¡Œé‡é”8,710è¬äººæ¬¡ï¼ˆ2023å¹´ï¼š5,360è¬ï¼‰ï¼Œè²¿æ˜“æ©Ÿæ§‹å®šæ€§ç‚ºã€Œå®Œå…¨ä¸å¯é€†è½‰ã€',
    risk1Src:'ä¾†æºï¼šSCMPç ”ç©¶/å®˜æ–¹æ•¸æ“šï¼ˆèª¿ç ”å ±å‘Šå¼•ç”¨ï¼‰',
    risk2Label:'é¢¨éšªäºŒï¼šå‹å·¥æˆæœ¬èˆ‡è¡Œæ¥­ç›ˆåˆ©å¤±è¡¡', risk2:'é¦™æ¸¯é£²é£Ÿæ¥­å¹³å‡åˆ©æ½¤ç‡23%ï¼ˆè¶Šå—ï¼š38%ï¼‰ï¼›é£²é£Ÿæ¥­å¤±æ¥­ç‡2025å¹´ä¸­å‡è‡³6.4%ï¼Œä»é ˆæ”¯ä»˜æº¢åƒ¹è–ªé…¬ç•™æ‰',
    risk2Src:'ä¾†æºï¼šRestroworksï¼ˆèª¿ç ”å ±å‘Šå¼•ç”¨ï¼‰',
    risk3Label:'é¢¨éšªä¸‰ï¼šå¤–è³£å¹³å°ä½£é‡‘ä¾µè•åˆ©æ½¤ç‡', risk3:'æ¨™æº–ä½£é‡‘ç‡ç´„30%ï¼Œé¤å»³é ˆåŠ åƒ¹40â€“50%ç¶­æŒå¤–è³£å¯è¡Œæ€§ï¼Œé•·æœŸæå®³å“ç‰Œå¿ èª åº¦',
    risk3Src:'ä¾†æºï¼šè¡Œæ¥­èª¿æŸ¥ï¼ˆèª¿ç ”å ±å‘Šå¼•ç”¨ï¼‰',
    socNoRecord:'å°šæœªè¨˜éŒ„è˜‡æ ¼æ‹‰åº•å°è©±ï¼Œè«‹å…ˆåœ¨è©•åˆ†çœ‹æ¿å®Œæˆæå•äº’å‹•',
    reportDate:'å ±å‘Šç”Ÿæˆæ—¥æœŸï¼š', dataNote:'æ•¸æ“šå”¯ä¸€ä¾æ“šï¼šç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šæ•¸æ“š',
    hal1Label:'âœ“ å·²æ ¸æŸ¥ â€” æ•¸æ“šå®Œæ•´æ€§', hal1:'äº”åŠ›æ‰€æœ‰æ ¸å¿ƒæ•¸æ“šï¼ˆ8,710è¬äººæ¬¡åŒ—ä¸Šå‡ºè¡Œã€HK$1,096å„„å¸‚å ´è¦æ¨¡ã€-0.9%é‡è·Œã€38%å¤–è³£æ»²é€ç‡ã€30%å¹³å°ä½£é‡‘ã€95%é€²å£ä¾å­˜ã€+0.7% CPIã€26%é¦–å¹´å¤±æ¥­ç‡ã€-0.5%å•†å€ç§Ÿé‡‘ã€HK$4.33å„„å¤§å¿«æ´»è³‡ç”¢ï¼‰å‡å®Œæ•´å°æ‡‰èª¿ç ”å ±å‘Šè¼‰æ˜æ•¸æ“šï¼Œæœªè¶…å‡ºå ±å‘Šç¯„åœã€‚',
    hal2Label:'âš  å·²æ¨™è¨˜ â€” [DATA UNAVAILABLE] é …ç›®', hal2:'æ›¿ä»£å“ç¶­åº¦ï¼šè¶…å¸‚ç†Ÿé£ŸéŠ·å”®é¡å…·é«”æ•¸å­—ï¼ˆ2023å¹´ï¼‰åŠé£Ÿå“é›»å•†å…·é«”æ”¶å…¥é æ¸¬ï¼ˆ2025å¹´ï¼‰ï¼Œåœ¨ç¾æœ‰å ±å‘Šç‰ˆæœ¬ä¸­æœªå®Œæ•´å‘ˆç¾ï¼Œå·²æŒ‰å ±å‘ŠMissing Data Protocolæ¨™è¨˜[DATA UNAVAILABLE]ï¼Œæœªæ“…è‡ªä¼°ç®—ã€‚',
    hal3Label:'âœ“ å·²æ ¸æŸ¥ â€” é‚Šç•Œåˆè¦', hal3:'å¤–è³£æ»²é€ç‡ï¼ˆ38%ï¼‰åŠKeeTaå¸‚ä½”ï¼ˆ44%ï¼‰åš´æ ¼æ­¸å…¥ã€Œè³¼è²·è€…è­°åƒ¹èƒ½åŠ›ã€ï¼ˆModule 4ï¼‰ï¼Œæœªåˆ—å…¥æ›¿ä»£å“ç¶­åº¦ï¼ˆModule 5ï¼‰ã€‚ç¬¦åˆå ±å‘Šç•Œå®šï¼šå¤–è³£ç‚ºé¤å»³æ¥­å…§éƒ¨æ¸ é“ï¼Œä¸å±¬æ›¿ä»£å“ã€‚',
    hal4Label:'âœ“ å·²æ ¸æŸ¥ â€” ä¾†æºå±¬æ€§åˆè¦', hal4:'æ‰€æœ‰æ•¸æ“šå‡æ¨™æ³¨å…·é«”æ©Ÿæ§‹åŠå ±å‘Šåç¨±ï¼ˆC&SDã€FEHDã€USDA FASã€Knight Frankã€å¤§å¿«æ´»å¹´å ±ã€PBOCæ·±åœ³ï¼‰ã€‚æœªä½¿ç”¨ã€Œç¶²çµ¡è³‡æ–™ã€ã€ã€Œå…¬é–‹æ•¸æ“šã€æˆ–ä»»ä½•ä¸å¯è¿½æº¯è¡¨è¿°ã€‚',
    hal5Label:'âœ“ å·²æ ¸æŸ¥ â€” è©•åˆ†é‚è¼¯åˆè¦', hal5:'æ‰€æœ‰äº”åŠ›è©•åˆ†ä»¥èª¿ç ”å ±å‘Šå¼·åº¦è©•å®šæ¨™æº–ç‚ºä¾æ“šï¼ˆHigh/Medium/Lowå°æ‡‰å ±å‘Šç•Œå®šï¼‰ï¼Œè©•åˆ†èª¿æ•´é‚è¼¯åš´æ ¼å°æ‡‰ç”¨æˆ¶æ±ºç­–èˆ‡å ±å‘Šæ•¸æ“šï¼Œæœªå‰µè¨­å ±å‘ŠæœªæåŠçš„è©•åˆ†å ´æ™¯ã€‚',
    adCompRival:'ç«¶çˆ­åŠ›Ã—é¸å€é©é…', adLocEntry:'é¸å€Ã—æ–°é€²å…¥è€…å£å£˜é©é…', adSupply:'ç«¶çˆ­åŠ›Ã—ä¾›æ‡‰å•†é©é…', adBuyer:'å®¢ç¾¤Ã—è³¼è²·è€…è­°åƒ¹é©é…', adSub:'å®¢ç¾¤Ã—æ›¿ä»£å“é©é…',
    noticeReport:'è«‹å…ˆå®Œæˆæ‰€æœ‰åŸºæœ¬ç›¤è¨­ç½®å¾Œå†ç”Ÿæˆå ±å‘Šã€‚',
    modalScoreLabel:'äº”åŠ›è©•åˆ†', modalWeightLabel:'ç•¶å‰æ¬Šé‡', modalBasisLabel:'å®Œæ•´è©•åˆ†ä¾æ“šï¼ˆä¾†æºï¼šç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šï¼‰',
    modalCriteriaLabel:'å¼·åº¦è©•å®šæ¨™æº–', modalCriteriaText:'åš´æ ¼ä¾æ“šèª¿ç ”å ±å‘Šï¼šHighï¼ˆâ‰¥3å€‹æ•¸æ“šé»æŒ‡å‘å¼·å£“åŠ›ï¼‰ã€Mediumï¼ˆæ­£è² å› ç´ å¤§è‡´å¹³è¡¡ï¼‰ã€Lowï¼ˆâ‰¥3å€‹æ•¸æ“šé»æŒ‡å‘å¼±å£“åŠ›ï¼‰ã€‚æ‰€æœ‰è©•åˆ†å¯è¿½æº¯è‡³å ±å‘Šå…·é«”æ•¸æ“šã€‚',
    modalSrcDecl:'è©•åˆ†ä¾æ“šï¼šç”¨æˆ¶æ±ºç­– ï¼‹ ç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šæ•¸æ“šï¼ˆé¦™æ¸¯æŒç‰Œé£²é£Ÿæ¥­æ³¢ç‰¹äº”åŠ›åˆ†æå ±å‘Šï¼Œ2024â€“2026ï¼‰',
    badgeLabel:'ç¶œåˆè©•åˆ†'
  }
};

let LANG_CUR = 'en';

function t(key){ return LANG[LANG_CUR][key] || LANG.en[key] || key; }

function setLang(lang){
  LANG_CUR = lang;
  document.getElementById('btn-en').classList.toggle('active', lang==='en');
  document.getElementById('btn-zh').classList.toggle('active', lang==='zh');
  applyLang();
  updateAll();
}

function applyLang(){
  const L = LANG[LANG_CUR];
  // Topbar
  document.getElementById('t-title').textContent = L.title;
  document.getElementById('t-sub').textContent = L.sub;
  // Left panel
  document.getElementById('p-title').textContent = L.pTitle;
  document.getElementById('p-desc').textContent = L.pDesc;
  document.getElementById('l-budget').textContent = L.lBudget;
  document.getElementById('l-cost').textContent = L.lCost;
  document.getElementById('l-comp').textContent = L.lComp;
  document.getElementById('l-locSeg').textContent = L.lLocSeg;
  document.getElementById('ll-location').textContent = L.llLoc;
  document.getElementById('ll-segment').textContent = L.llSeg;
  document.getElementById('b-low').textContent = L.bLow;
  document.getElementById('b-mid').textContent = L.bMid;
  document.getElementById('b-high').textContent = L.bHigh;
  document.getElementById('c-foodheavy').textContent = L.cFoodheavy;
  document.getElementById('c-balanced').textContent = L.cBalanced;
  document.getElementById('c-ambiance').textContent = L.cAmbiance;
  document.getElementById('comp-sig').textContent = L.compSig;
  document.getElementById('comp-val').textContent = L.compVal;
  document.getElementById('comp-lux').textContent = L.compLux;
  document.getElementById('comp-sup').textContent = L.compSup;
  document.getElementById('loc-com').textContent = L.locCom;
  document.getElementById('loc-cbd').textContent = L.locCBD;
  document.getElementById('seg-mass').textContent = L.segMass;
  document.getElementById('seg-prem').textContent = L.segPrem;
  document.getElementById('cl-food').textContent = L.clFood;
  document.getElementById('cl-rent').textContent = L.clRent;
  document.getElementById('cl-fitout').textContent = L.clFitout;
  document.getElementById('ss-label').textContent = L.ssLabel;
  // score verdict only if not set yet
  if(!S.budget) document.getElementById('scoreVerdict').textContent = L.scoreVerdictInit;
  document.getElementById('ff-s').textContent = L.ffS;
  document.getElementById('ff-b').textContent = L.ffB;
  document.getElementById('ff-e').textContent = L.ffE;
  document.getElementById('ff-sub').textContent = L.ffSub;
  document.getElementById('ff-r').textContent = L.ffR;
  // Tabs
  document.getElementById('tab-r-lbl').textContent = L.tabR;
  document.getElementById('tab-e-lbl').textContent = L.tabE;
  document.getElementById('tab-s-lbl').textContent = L.tabS;
  document.getElementById('tab-b-lbl').textContent = L.tabB;
  document.getElementById('tab-sub-lbl').textContent = L.tabSub;
  document.getElementById('tab-sc-lbl').textContent = L.tabSc;
  document.getElementById('tab-rp-lbl').textContent = L.tabRp;
  // Force names (English subtitles stay always)
  document.getElementById('fn-rivals').textContent = L.fnRivals;
  document.getElementById('fn-entrants').textContent = L.fnEntrants;
  document.getElementById('fn-suppliers').textContent = L.fnSuppliers;
  document.getElementById('fn-buyers').textContent = L.fnBuyers;
  document.getElementById('fn-substitutes').textContent = L.fnSubs;
  // Data notices
  ['rivals','entrants','suppliers','buyers','substitutes'].forEach(k=>{
    const el = document.getElementById('dn-'+k);
    if(el) el.textContent = L['dnRivals']; // same notice for all
  });
  // Score board
  document.getElementById('sc-title').textContent = L.scTitle;
  document.getElementById('sc-sub').textContent = L.scSub;
  document.getElementById('score-notice-txt').textContent = L.scoreNoticeTxt;
  // Report
  document.getElementById('rp-title').textContent = L.rpTitle;
  document.getElementById('rp-sub').textContent = L.rpSub;
  document.getElementById('rp-notice').textContent = L.rpNotice;
  document.getElementById('gen-btn-txt').textContent = L.genBtnTxt;
  // Badge
  const badge = document.getElementById('topScoreBadge');
  if(S.scores.s) badge.textContent = L.badgeLabel+' '+(composite(S.scores,S.weights));
  else badge.textContent = L.badgeLabel+' â€”';
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// STATE & SCORING (unchanged from original)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const S = { budget:null,cost:null,comp:null,location:null,segment:null,
  scores:{s:null,b:null,e:null,sub:null,r:null},
  weights:{s:.15,b:.25,e:.15,sub:.15,r:.30}, socLog:[], answered:false };

const COST_MAP = { foodheavy:[45,30,25], balanced:[35,35,30], ambiance:[25,25,50] };

function pick(group,val,btn){
  S[group]=val;
  document.querySelectorAll('[data-group="'+group+'"]').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  if(group==='cost'){
    const[f,r,d]=COST_MAP[val];
    document.getElementById('costBars').style.display='block';
    ['c1','c2','c3'].forEach((id,i)=>document.getElementById(id).textContent=[f,r,d][i]+'%');
    ['b1','b2','b3'].forEach((id,i)=>{document.getElementById(id).style.width=[f,r,d][i]+'%'});
  }
  updateAll();
}

function calcScores(){
  const{budget,cost,comp,location,segment}=S;
  if(!budget||!cost||!comp||!location||!segment) return null;
  let s=6;
  if(comp==='supply') s-=1.5;
  if(cost==='foodheavy') s+=.5;
  if(budget==='high') s-=.5;
  let b=8;
  if((comp==='signature'||comp==='luxury')&&segment==='premium') b-=1;
  if(comp==='value'&&segment==='mass') b+=.5;
  if(location==='community') b-=.3;
  let e=5;
  if(budget==='high') e-=.5;
  if(location==='commercial') e+=.5;
  if(comp==='supply') e-=1;
  let sub=6;
  if(comp==='signature'||comp==='luxury') sub-=.5;
  if(segment==='mass') sub+=.5;
  if(location==='community') sub+=.3;
  let r=7.5;
  if(comp==='signature'&&segment==='premium') r-=.5;
  if(comp==='value'&&segment==='mass') r+=.5;
  if(location==='commercial') r+=.5;
  if(budget==='high') r-=.3;
  const round=x=>Math.round(Math.min(10,Math.max(1,x))*10)/10;
  return{s:round(s),b:round(b),e:round(e),sub:round(sub),r:round(r)};
}

function calcWeights(){
  const w={s:.15,b:.25,e:.15,sub:.15,r:.30};
  if(S.comp==='supply'){w.s=.20;w.b=.20;w.e=.15;w.sub=.15;w.r=.30}
  if(S.comp==='value'){w.b=.30;w.r=.30;w.e=.10;w.sub=.10;w.s=.20}
  const tot=Object.values(w).reduce((a,b)=>a+b,0);
  Object.keys(w).forEach(k=>w[k]=Math.round(w[k]/tot*100)/100);
  return w;
}

function composite(sc,wt){
  return Math.round(100-(sc.s*wt.s+sc.b*wt.b+sc.e*wt.e+sc.sub*wt.sub+sc.r*wt.r)*10);
}

function updateAll(){
  const sc=calcScores(); if(!sc) return;
  S.scores=sc; S.weights=calcWeights();
  const total=composite(sc,S.weights);
  document.getElementById('mainScore').textContent=total;
  const col=total>=80?'#fff':total>=60?'#fef08a':'#fca5a5';
  document.getElementById('mainScore').style.color=col;
  const L=LANG[LANG_CUR];
  document.getElementById('scoreVerdict').textContent=total>=80?L.v80:total>=60?L.v60:L.v40;
  const badge=document.getElementById('topScoreBadge');
  badge.textContent=L.badgeLabel+' '+total;
  badge.classList.add('updating'); setTimeout(()=>badge.classList.remove('updating'),350);
  ['s','b','e','sub','r'].forEach(k=>{
    const c=sc[k]>=7?'#f87171':sc[k]>=5?'#fbbf24':'#86efac';
    document.getElementById('bar-'+k).style.width=(sc[k]*10)+'%';
    document.getElementById('bar-'+k).style.background=c;
    document.getElementById('num-'+k).textContent=sc[k].toFixed(1);
  });
  renderScoring(sc,S.weights,total);
  renderAdapt();
}

const FORCE_KEYS = ['s','b','e','sub','r'];
const FORCE_EMOJIS = {s:'ğŸ­',b:'ğŸ‘¥',e:'ğŸšª',sub:'ğŸ”„',r:'âš”ï¸'};
const FORCE_BASIS_EN={
  s:'Research report (Suppliers): â‘  95% food import dependency â€” highly exposed to global commodity shocks (USDA FAS 2025); â‘¡ DCH represents 100+ brands, Ng Fung Hong dominates fresh meat â€” concentrated distribution; â‘¢ Basic food CPI +0.7% in Dec 2025 â€” mild inflation temporarily moderates pressure.',
  b:'Research report (Buyers): â‘  87.1M northbound departures 2025; estimated HK$55.7B Mainland spend 2024 â€” trade bodies: "totally irreversible"; â‘¡ Visitor per-capita spend âˆ’30% vs. 2018; â‘¢ Delivery platform penetration 38%, KeeTa 44% share â€” discount-conditioned consumers; â‘£ 126M cashless transactions in Shenzhen cement northbound spending habits.',
  e:'Research report (New Entrants): â‘  PCS system: 2 working-day licence issuance (vs. 20 days under AVP â€” 90% reduction); â‘¡ ~26% first-year restaurant failure rate; â‘¢ Prime commercial rent âˆ’0.5% 2025 â€” lowers entry costs (for all players); â‘£ Fairwood PP&E HK$433M illustrates scale capital requirements.',
  sub:'Research report (Substitutes): â‘  Supermarkets + convenience stores = 55% of food retail; â‘¡ Takeaway-only outlets grew 39% 2014â€“2024, priced HK$30â€“50; â‘¢ Food e-commerce and supermarket cooked food sales figures flagged [DATA UNAVAILABLE] in report â€” no estimation performed.',
  r:'Research report (Rivalry): â‘  2025 receipt volume âˆ’0.9% (flat value, shrinking volume); â‘¡ First annual net outlet contraction since 2018; â‘¢ Chinese restaurants: revenue âˆ’2.9%, volume âˆ’4.3%; â‘£ Food costs 31.9% of revenue, labour 25â€“35%; â‘¤ Delivery commission 30%, menu markup 40â€“50% required.'
};
const FORCE_BASIS_ZH={
  s:'ä¾æ“šï¼ˆèª¿ç ”å ±å‘Šä¾›æ‡‰å•†ç¶­åº¦ï¼‰ï¼šâ‘ é¦™æ¸¯95%é£Ÿæä¾è³´é€²å£ï¼Œé«˜åº¦æš´éœ²åœ‹éš›å•†å“åƒ¹æ ¼é¢¨éšªï¼ˆUSDA FAS 2025ï¼‰ï¼›â‘¡å¤§æ˜Œè¡Œä»£ç†é€¾ç™¾å“ç‰Œã€äº”è±è¡Œä¸»å°é®®è‚‰ä¾›æ‡‰ï¼Œåˆ†éŠ·æ¸ é“é›†ä¸­ï¼›â‘¢2025å¹´12æœˆåŸºæœ¬é£Ÿå“CPIæŒ‰å¹´åƒ…+0.7%ï¼Œæº«å’Œé€šè„¹æš«æ™‚ç·©è§£è­°åƒ¹å£“åŠ›ã€‚',
  b:'ä¾æ“šï¼ˆèª¿ç ”å ±å‘Šè³¼è²·è€…ç¶­åº¦ï¼‰ï¼šâ‘ 2025å¹´æ¸¯äººåŒ—ä¸Šå‡ºè¡Œ8,710è¬äººæ¬¡ï¼Œ2024å¹´å…§åœ°æ¶ˆè²»HK$557å„„ï¼ˆä¸å«äº¤é€šï¼‰ï¼Œè²¿æ˜“æ©Ÿæ§‹æŒ‡ä¸å¯é€†è½‰ï¼›â‘¡è¨ªæ¸¯æ—…å®¢äººå‡æ¶ˆè²»è¼ƒ2018å¹´é™30%ï¼›â‘¢å¤–è³£å¹³å°æ»²é€ç‡38%ï¼ŒKeeTaä»¥è£œè²¼å¥ª44%ä»½é¡ï¼Œæ¶ˆè²»è€…é«˜åº¦æŠ˜æ‰£æ•æ„Ÿï¼›â‘£æ¸¯äººåœ¨æ·±éç¾é‡‘äº¤æ˜“1.26å„„ç­†å›ºåŒ–åŒ—ä¸Šæ¶ˆè²»ç¿’æ…£ã€‚',
  e:'ä¾æ“šï¼ˆèª¿ç ”å ±å‘Šæ–°é€²å…¥è€…ç¶­åº¦ï¼‰ï¼šâ‘ PCSåˆ¶åº¦ä»¤ç‰Œç…§2å€‹å·¥ä½œæ—¥ç™¼å‡ºï¼ˆè¼ƒèˆŠåˆ¶20æ—¥ç¸®çŸ­90%ï¼‰ï¼›â‘¡ç´„26%æ–°é¤å»³é¦–å¹´çµæ¥­æˆ–æ˜“æ‰‹ï¼›â‘¢æ ¸å¿ƒå•†å€é›¶å”®ç§Ÿé‡‘å¾®é™0.5%é™ä½å…¥å ´æˆæœ¬ï¼›â‘£å¤§å¿«æ´»HK$4.33å„„å» æˆ¿è¨­å‚™åæ˜ è¦æ¨¡åŒ–æ‰€éœ€è³‡æœ¬å¼·åº¦ã€‚',
  sub:'ä¾æ“šï¼ˆèª¿ç ”å ±å‘Šæ›¿ä»£å“ç¶­åº¦ï¼‰ï¼šâ‘ è¶…å¸‚+ä¾¿åˆ©åº—ä½”é£Ÿå“é›¶å”®55%ï¼›â‘¡å¤–è³£å°ˆé–€åº—10å¹´å¢é•·39%ï¼Œå®šåƒ¹HK$30â€“50ç›´æ¥æ›¿ä»£å ‚é£Ÿï¼›â‘¢é£Ÿå“é›»å•†åŠè¶…å¸‚ç†Ÿé£ŸéŠ·å”®é¡å…·é«”æ•¸å€¼åœ¨å ±å‘Šä¸­æœªå®Œæ•´å‘ˆç¾ï¼Œå·²æ¨™è¨˜[DATA UNAVAILABLE]ã€‚',
  r:'ä¾æ“šï¼ˆèª¿ç ”å ±å‘Šç«¶çˆ­è€…ç¶­åº¦ï¼‰ï¼šâ‘ 2025å¹´å…¨å¹´é¤å»³æ”¶è²¨é‡-0.9%ï¼ˆé‡è·Œï¼‰ï¼›â‘¡2018å¹´å¾Œé¦–æ¬¡ç¶²é»æ·¨å¹´åº¦æ”¶ç¸®ï¼›â‘¢ä¸­å¼é¤å»³é‡è·Œ4.3%ï¼Œéä¸­å¼å¢4.0%ï¼›â‘£é£Ÿææ¡è³¼ä½”æ”¶å…¥31.9%ï¼Œå‹å·¥æˆæœ¬ä½”25â€“35%ï¼›â‘¤å¤–è³£å¹³å°ä½£é‡‘30%ï¼ŒåŠ åƒ¹40â€“50%ä¾µè•å“ç‰Œã€‚'
};

function forceBasis(k){ return LANG_CUR==='zh' ? FORCE_BASIS_ZH[k] : FORCE_BASIS_EN[k]; }

function renderScoring(sc,wt,total){
  document.getElementById('scoreNotice').style.display='none';
  document.getElementById('scoringContent').style.display='block';
  const L=LANG[LANG_CUR];
  const scardKeys={s:L.scardS,b:L.scardB,e:L.scardE,sub:L.scardSub,r:L.scardR};
  let cards='';
  FORCE_KEYS.forEach(k=>{
    const col=sc[k]>=7?'var(--red-dark)':sc[k]>=5?'var(--yellow-dark)':'var(--green-dark)';
    cards+=`<div class="score-card" onclick="showModal('${scardKeys[k]}','${forceBasis(k).replace(/'/g,"\\'").replace(/\n/g,' ')}',${sc[k]},${Math.round(wt[k]*100)})">
      <div class="score-card-icon">${FORCE_EMOJIS[k]}</div>
      <div class="score-card-label">${scardKeys[k]}</div>
      <div class="score-card-num" style="color:${col}">${sc[k].toFixed(1)}</div>
      <div class="score-card-weight">${L.ssLabel.split(' ')[0]==='PROFIT'?'Weight':'æ¬Šé‡'} ${Math.round(wt[k]*100)}%</div>
      <div class="score-card-basis">${forceBasis(k).substring(0,65)}â€¦ ${L.clickBasis}</div>
    </div>`;
  });
  document.getElementById('scoreCards').innerHTML=cards;

  // Feedback
  let fc,ft,fb;
  if(total>=80){
    fc='feedback-high';ft=L.fb80Title.replace('{n}',total);fb=L.fb80;
  } else if(total>=60){
    fc='feedback-medium';ft=L.fb60Title.replace('{n}',total);
    const top2=Object.entries(sc).sort((a,b)=>b[1]-a[1]).slice(0,2);
    const tips_en={s:'Suppliers: Consider diversifying procurement to reduce DCH/Ng Fung concentration dependency',b:'Buyers: Strengthen experience differentiation to reduce direct competition with platform discount spending',e:'New Entrants: PCS lowered admin barriers â€” build harder-to-copy moats (e.g. exclusive supply chain)',sub:'Substitutes: Takeaway-only growth 39% â€” optimise positioning away from HK$30â€“50 direct competition',r:'Rivalry: Traditional positioning faces dual decline â€” tilt toward non-Chinese +4% growth sub-segment'};
    const tips_zh={s:'ä¾›æ‡‰å•†ï¼šè€ƒæ…®å¤šå…ƒæ¡è³¼ï¼Œé™ä½å°å¤§æ˜Œè¡Œ/äº”è±è¡Œé›†ä¸­åˆ†éŠ·çš„ä¾è³´',b:'è³¼è²·è€…ï¼šå¼·åŒ–é«”é©—å·®ç•°åŒ–ï¼Œæ¸›å°‘èˆ‡å¤–è³£å¹³å°æŠ˜æ‰£æ¶ˆè²»çš„ç›´æ¥ç«¶çˆ­',e:'æ–°é€²å…¥è€…ï¼šPCSé™ä½è¡Œæ”¿å£å£˜ï¼Œéœ€å»ºç«‹é›£ä»¥è¤‡è£½çš„æ ¸å¿ƒè­·åŸæ²³ï¼ˆå¦‚ç¨å®¶ä¾›æ‡‰éˆï¼‰',sub:'æ›¿ä»£å“ï¼šå¤–è³£å°ˆé–€åº—å¢39%ï¼Œå»ºè­°å„ªåŒ–å ´æ™¯å®šä½è„«é›¢HK$30â€“50åƒ¹æ ¼å¸¶ç›´æ¥ç«¶çˆ­',r:'ç«¶çˆ­è€…ï¼šå‚³çµ±å®šä½é¢è‡¨é‡åƒ¹é›™è·Œï¼Œå»ºè­°å‘éä¸­å¼+4%å¢é•·ç´°åˆ†å‚¾æ–œ'};
    const tips=LANG_CUR==='zh'?tips_zh:tips_en;
    fb=(LANG_CUR==='zh'?'æ ¸å¿ƒå„ªåŒ–é»ï¼š':'Key optimisation points: ')+'â‘  '+tips[top2[0][0]]+'; â‘¡ '+tips[top2[1][0]]+'.';
  } else {
    fc='feedback-low';ft=L.fb40Title.replace('{n}',total);
    const top=Object.entries(sc).sort((a,b)=>b[1]-a[1])[0];
    const re_en={b:`Buyer Power very high (${sc.b}): 87.1M northbound + 38% delivery penetration â€” current decisions unable to effectively retain customer flow`,r:`Rivalry very high (${sc.r}): Volume âˆ’0.9% + first net outlet contraction since 2018 â€” intense zero-sum competition`,s:`Supplier risk significant (${sc.s}): 95% import dependency + food-heavy cost structure â€” severe margin pressure`};
    const re_zh={b:`è³¼è²·è€…è­°åƒ¹èƒ½åŠ›æ¥µé«˜ï¼ˆ${sc.b}åˆ†ï¼‰ï¼šåŒ—ä¸Šæ¶ˆè²»8,710è¬äººæ¬¡+å¤–è³£38%æ»²é€ï¼Œç•¶å‰æ±ºç­–é›£ä»¥æœ‰æ•ˆæˆªç•™å®¢æµ`,r:`ç«¶çˆ­è€…å¼·åº¦æ¥µé«˜ï¼ˆ${sc.r}åˆ†ï¼‰ï¼šå¸‚å ´é‡è·Œ0.9%+ç¶²é»é¦–æ¬¡å¹´åº¦æ·¨æ”¶ç¸®ï¼Œå­˜é‡ç«¶çˆ­åŠ‡çƒˆ`,s:`ä¾›æ‡‰å•†è­°åƒ¹é¢¨éšªé¡¯è‘—ï¼ˆ${sc.s}åˆ†ï¼‰ï¼š95%é€²å£ä¾å­˜+é£Ÿæåé‡æˆæœ¬çµæ§‹ï¼Œåˆ©æ½¤ç©ºé–“åš´é‡å—å£“`};
    const re=LANG_CUR==='zh'?re_zh:re_en;
    fb=(LANG_CUR==='zh'?'æ ¸å¿ƒä¸ç›ˆåˆ©åŸå› ï¼š':'Core cause: ')+(re[top[0]]||'Multi-force pressure â€” comprehensive decision review recommended')+'.';
  }
  document.getElementById('feedbackBox').innerHTML=`<div class="feedback-box ${fc}"><div class="feedback-title">${fc==='feedback-high'?'ğŸ‰':fc==='feedback-medium'?'âš ï¸':'ğŸ”´'} ${ft}</div><div class="feedback-body">${fb}</div><div class="feedback-source">${L.fbSrc}</div></div>`;
  renderSocratic(total,sc);
}

function renderSocratic(total,sc){
  const L=LANG[LANG_CUR];
  const tier=total>=80?'high':total>=60?'medium':'low';
  document.getElementById('socraticSection').innerHTML=`
    <div class="socratic-box">
      <div class="socratic-label">ğŸ’¬ ${L.socLabel} ${L.socType[tier]}</div>
      <div class="socratic-q">${L.socQ[tier]}</div>
      <div style="font-size:9px;color:rgba(255,255,255,.6);font-weight:600;margin-bottom:8px">${L.socSrcNote}</div>
      <textarea class="socratic-input" id="socraticInput" placeholder="${L.socPlaceholder}"></textarea>
      <button class="socratic-submit" onclick="submitSocratic('${tier}')">${L.socSubmit}</button>
      <div class="socratic-response" id="socraticResponse"></div>
    </div>`;
}

function submitSocratic(tier){
  const input=document.getElementById('socraticInput').value.trim();
  if(!input) return;
  const L=LANG[LANG_CUR];
  const now=new Date().toLocaleString(LANG_CUR==='zh'?'zh-HK':'en-HK');
  S.socLog.push({type:L.socType[tier],question:L.socQ[tier],answer:input,guidance:L.socResp[tier],time:now,lang:LANG_CUR});
  const resp=document.getElementById('socraticResponse');
  resp.style.display='block';
  resp.innerHTML='<strong style="color:rgba(255,255,255,.8);font-size:9px;letter-spacing:1px;text-transform:uppercase">'+L.socAILabel+'</strong><br><br>'+L.socResp[tier]+'<br><br><span style="font-size:9px;color:rgba(255,255,255,.5)">'+L.socSaved+'</span>';
}

function renderAdapt(){
  const{budget,location,comp,segment,cost}=S;
  if(!budget||!location) return;
  const L=LANG[LANG_CUR];
  const bL={low:L.bLLow,mid:L.bLMid,high:L.bLHigh};
  const lL={community:L.locLCom,commercial:L.locLCBD};

  // Rivals
  let ra='';
  if(comp==='value'&&segment==='mass'){
    const title=LANG_CUR==='zh'?'ç«¶çˆ­æœ€æ¿€çƒˆçµ„åˆ':'Most contested positioning';
    const body=LANG_CUR==='zh'?'å ±å‘Šæ•¸æ“šï¼šä¸­å¼é¤å»³ï¼ˆå‚³çµ±æ€§åƒ¹æ¯”å®šä½ï¼‰2025å¹´é‡è·Œ4.3%ï¼›å¤–è³£ä½£é‡‘30%ç–ŠåŠ å¤§çœ¾æŠ˜æ‰£æ¶ˆè²»ç¿’æ…£ï¼Œç›ˆåˆ©ç©ºé–“æœ€å—å£“ç¸®ã€‚':'Report data: Chinese restaurants (traditional value positioning) saw âˆ’4.3% volume in 2025. Platform commission 30% compounded with mass-market discount habits creates maximum margin pressure.';
    ra=mkAdapt(L.adCompRival,title,body,'Research report â€” Rivalry & Buyers dimensions');
  } else if((comp==='signature'||comp==='luxury')&&segment==='premium'){
    const title=LANG_CUR==='zh'?'å°æ‡‰çµæ§‹æ€§å¢é•·ç´°åˆ†':'Aligns with structural growth sub-segment';
    const body=LANG_CUR==='zh'?'å ±å‘Šé¡¯ç¤ºéä¸­å¼é¤å»³2025å¹´é€†å‹¢å¢é•·+4.0%ï¼›ä½†æ—…å®¢æ¶ˆè²»é™30%ï¼Œä¸­é«˜ç«¯å®šä½éœ€å€šè³´æœ¬åœ°ç†Ÿå®¢ï¼Œè€Œéæ—…å®¢æµé‡ã€‚':'Report: Non-Chinese restaurants grew +4.0% in 2025. However, visitor per-capita spend âˆ’30% â€” premium positioning requires local loyal customers, not visitor traffic.';
    ra=mkAdapt(L.adCompRival,title,body,'Research report â€” Rivalry & Buyers dimensions');
  }
  setAdapt('rivals-adapt',ra);

  // Entrants
  let ea='';
  if(budget==='low'&&location==='community'){
    const t=LANG_CUR==='zh'?'è¡Œæ”¿å£å£˜ä½ä½†é¦–å¹´é¢¨éšªé«˜':'Low admin barrier but high first-year risk';
    const b=LANG_CUR==='zh'?'PCSåˆ¶åº¦ä»¤ç‰Œç…§2å·¥ä½œæ—¥ç™¼å‡ºï¼›ä½†ç´„26%æ–°é¤å»³é¦–å¹´çµæ¥­ï¼Œç¤¾å€å ´åœ°ç«¶çˆ­è€…å¯å¿«é€Ÿè·Ÿé€²ï¼ˆåŒäº«ä½å‡†å…¥é–€æª»ï¼‰ã€‚':'PCS system: 2-day licence issuance. But ~26% first-year failure rate; community competitors equally benefit from low entry barriers â€” limited moat.';
    ea=mkAdapt(L.adLocEntry,t,b,'Research report â€” New Entrants dimension (FEHD / BLS / Escoffier)');
  } else if(budget==='mid'&&location==='commercial'){
    const t=LANG_CUR==='zh'?'ç§Ÿé‡‘å„ªæƒ å…¼å…·æƒ ç«¶çˆ­è€…':'Rent relief benefits all players equally';
    const b=LANG_CUR==='zh'?'æ ¸å¿ƒå•†å€é›¶å”®ç§Ÿé‡‘å¾®é™0.5%ï¼ˆKnight Frank Q4 2025ï¼‰é™ä½å…¥å ´æˆæœ¬ï¼ŒæƒŸå°æ‰€æœ‰ç«¶çˆ­è€…åŒç­‰æ•ˆæ‡‰ï¼Œè­·åŸæ²³æ•ˆæœæœ‰é™ã€‚':'Prime commercial rent âˆ’0.5% (Knight Frank Q4 2025) lowers entry costs â€” but this benefits all new entrants equally, offering limited competitive moat.';
    ea=mkAdapt(L.adLocEntry,t,b,'Research report â€” New Entrants dimension (Knight Frank Q4 2025)');
  } else if(budget==='high'){
    const t=LANG_CUR==='zh'?'è¦æ¨¡è³‡æœ¬æ§‹æˆå¾Œé€²è€…å£å£˜':'Capital scale creates barrier to followers';
    const b=LANG_CUR==='zh'?'å¤§å¿«æ´»HK$4.33å„„å» æˆ¿è¨­å‚™åæ˜ è¦æ¨¡åŒ–æ‰€éœ€è³‡æœ¬å¼·åº¦ï¼ˆ2024/25å¹´å ±ï¼‰ï¼›é«˜é ç®—å¯å»ºç«‹ä¾›æ‡‰éˆè¦æ¨¡å„ªå‹¢ã€‚':'Fairwood PP&E of HK$433M illustrates scale capital intensity (FY2024/25 Annual Report). High budget enables supply chain scale advantages difficult for new entrants to replicate.';
    ea=mkAdapt(L.adLocEntry,t,b,'Research report â€” New Entrants dimension (Fairwood 2024/25 Annual Report)');
  }
  setAdapt('entrants-adapt',ea);

  // Suppliers
  let sa='';
  if(comp==='supply'){
    const t=LANG_CUR==='zh'?'å¯éƒ¨åˆ†å°æ²–95%é€²å£ä¾å­˜é¢¨éšª':'Partially hedges 95% import dependency risk';
    const b=LANG_CUR==='zh'?'è‡ªå»ºä¾›æ‡‰éˆå¯ç¹é–‹å¤§æ˜Œè¡Œ/äº”è±è¡Œé›†ä¸­åˆ†éŠ·ï¼›2025å¹´12æœˆé£Ÿå“CPIåƒ…+0.7%ï¼Œç•¶å‰çª—å£æœŸå»ºç«‹ç¨å®¶ä¾›æ‡‰éˆæˆæœ¬å£“åŠ›ç›¸å°å¯æ§ã€‚':'Self-built supply chain bypasses DCH/Ng Fung Hong concentration. Dec 2025 food CPI +0.7% means current cost window for establishing exclusive supply chain is relatively manageable.';
    sa=mkAdapt(L.adSupply,t,b,'Research report â€” Suppliers dimension (USDA FAS / C&SD)');
  } else if(cost==='foodheavy'){
    const t=LANG_CUR==='zh'?'é«˜é£Ÿæä½”æ¯”åŠ å¤§å°ä¾›æ‡‰å•†æ³¢å‹•çš„æš´éœ²åº¦':'High food ratio amplifies supplier volatility exposure';
    const b=LANG_CUR==='zh'?'é£Ÿææ¡è³¼ä½”æˆæœ¬45%æ™‚ï¼Œä¾›æ‡‰å•†ä»»ä½•åƒ¹æ ¼èª¿æ•´ç›´æ¥è¡æ“Šç›ˆåˆ©ã€‚å ±å‘Šé¡¯ç¤ºå…¨è¡Œæ¥­é£Ÿææ¡è³¼ä½”æ”¶å…¥31.9%ï¼Œåé‡é…ç½®ç³»çµ±é¢¨éšªæ›´é«˜ã€‚':'With food costs at 45% of total cost, any supplier price change directly hits margins. Report shows industry food cost ratio already at 31.9% â€” food-heavy allocation creates above-average structural risk.';
    sa=mkAdapt(L.adSupply,t,b,'Research report â€” Suppliers dimension (C&SD Full Year 2025)');
  }
  setAdapt('suppliers-adapt',sa);

  // Buyers
  let ba='';
  if(segment==='premium'&&(comp==='signature'||comp==='luxury')){
    const t=LANG_CUR==='zh'?'å·®ç•°åŒ–éƒ¨åˆ†ç·©è¡è³¼è²·è€…é«˜è­°åƒ¹èƒ½åŠ›':'Differentiation partially buffers high buyer power';
    const b=LANG_CUR==='zh'?'å·®ç•°åŒ–é«”é©—å¯é™ä½èˆ‡å¤–è³£æŠ˜æ‰£æ¶ˆè²»çš„ç›´æ¥ç«¶çˆ­ï¼›ä½†ä»éœ€é¢å°æ—…å®¢æ¶ˆè²»-30%ï¼ˆå ±å‘Šæ•¸æ“šï¼‰çš„çµæ§‹å£“åŠ›ï¼Œéœ€æ·±è€•æœ¬åœ°ç†Ÿå®¢ã€‚':'Experience differentiation reduces direct competition with delivery platform discounts. However, visitor per-capita spend âˆ’30% (report data) means premium positioning must rely on local loyal customers, not tourist flow.';
    ba=mkAdapt(L.adBuyer,t,b,'Research report â€” Buyers dimension (China Daily / HKTB)');
  } else if(segment==='mass'&&comp==='value'){
    const t=LANG_CUR==='zh'?'é¢è‡¨æœ€å¼·è³¼è²·è€…è­°åƒ¹å£“åŠ›':'Faces maximum buyer bargaining pressure';
    const b=LANG_CUR==='zh'?'KeeTaè£œè²¼å¥ª44%å¸‚ä½”+å¤–è³£æ»²é€38%ä»¤æŠ˜æ‰£ç¿’æ…£æ·±åº¦å½¢æˆï¼›æ¸¯äººæ·±åœ³éç¾é‡‘äº¤æ˜“1.26å„„ç­†å›ºåŒ–åŒ—ä¸Šæ¶ˆè²»ã€‚æ­¤çµ„åˆè³¼è²·è€…è­°åƒ¹èƒ½åŠ›é”æœ€é«˜æ°´å¹³ã€‚':'KeeTa\'s 44% share via subsidies + 38% delivery penetration deeply conditions discount habits. 126M cashless transactions in Shenzhen cement northbound spending. This combination yields maximum buyer power.';
    ba=mkAdapt(L.adBuyer,t,b,'Research report â€” Buyers dimension (BBCIncorp / PBOC Shenzhen)');
  }
  setAdapt('buyers-adapt',ba);

  // Substitutes
  let sula='';
  if(segment==='mass'){
    const t=LANG_CUR==='zh'?'HK$30â€“$50å¤–è³£å°ˆé–€åº—ç›´æ¥æ›¿ä»£':'HK$30â€“50 takeaway outlets: direct substitute';
    const b=LANG_CUR==='zh'?'å¤–è³£å°ˆé–€åº—10å¹´å¢39%ï¼Œå®šåƒ¹HK$30â€“50å°å¤§çœ¾å ‚é£Ÿåˆå¸‚æ§‹æˆæœ€ç›´æ¥æ›¿ä»£ï¼›è¶…å¸‚+ä¾¿åˆ©åº—ä½”é£Ÿå“é›¶å”®55%æä¾›ä¾¿æ·ä½åƒ¹é¸é …ã€‚':'Takeaway-only outlets grew 39% over 10 years, priced HK$30â€“50 â€” direct substitute for mass-market lunch dining. Supermarkets + convenience stores (55% food retail) offer additional cheap alternatives.';
    sula=mkAdapt(L.adSub,t,b,'Research report â€” Substitutes dimension (LegCo Research / USDA FAS)');
  } else {
    const t=LANG_CUR==='zh'?'é«”é©—æ¶ˆè²»å°å³é£Ÿæ›¿ä»£å“æ•æ„Ÿåº¦è¼ƒä½':'Experience dining less sensitive to substitutes';
    const b=LANG_CUR==='zh'?'ä¸­é«˜ç«¯å®¢ç¾¤å°ç’°å¢ƒé«”é©—æœ‰æ›´é«˜è¦æ±‚ï¼Œæ›¿ä»£å“å¨è„…ç›¸å°æº«å’Œï¼›ä½†é£Ÿå“é›»å•†æ“´å¼µè¶¨å‹¢ï¼ˆå ±å‘Šç¢ºèªï¼‰ä»éœ€æŒçºŒé—œæ³¨ã€‚':'Premium customers have higher expectations for ambiance â€” substitute threat relatively contained. However, food e-commerce expansion trend (confirmed by report) warrants ongoing monitoring.';
    sula=mkAdapt(L.adSub,t,b,'Research report â€” Substitutes dimension');
  }
  setAdapt('substitutes-adapt',sula);
}

function mkAdapt(tag,title,body,source){
  return`<div class="adapt-tag">ğŸ¯ ${tag}</div><div class="data-card"><div class="data-card-value" style="font-size:13px;font-weight:800;margin-bottom:5px">${title}</div><div class="data-card-note" style="font-style:normal">${body}</div><div class="data-source">${LANG_CUR==='zh'?'ä¾æ“šï¼šç”¨æˆ¶æä¾›çš„èª¿ç ”å ±å‘Šæ•¸æ“š â€”':'Basis: User-provided research report â€”'} ${source}</div></div>`;
}
function setAdapt(id,html){ const el=document.getElementById(id); if(el) el.innerHTML=html; }

function showModal(title,basis,score,weight){
  const L=LANG[LANG_CUR];
  document.getElementById('modalTitle').textContent=title+' â€” '+(LANG_CUR==='zh'?'è©•åˆ†ä¾æ“š':'Score Basis');
  document.getElementById('modalBody').innerHTML=`<dl>
    <dt>${L.modalScoreLabel}</dt><dd>${score.toFixed(1)} / 10 (${score>=7?(LANG_CUR==='zh'?'å¼·å¨è„… High':'High Threat'):score>=5?(LANG_CUR==='zh'?'ä¸­ç­‰å¨è„… Medium':'Medium Threat'):(LANG_CUR==='zh'?'å¼±å¨è„… Low':'Low Threat')})</dd>
    <dt>${L.modalWeightLabel}</dt><dd>${weight}% (${LANG_CUR==='zh'?'ä¾ç”¨æˆ¶æ±ºç­–å‹•æ…‹èª¿æ•´':'dynamically adjusted per your decisions'})</dd>
    <dt>${L.modalBasisLabel}</dt><dd style="white-space:pre-wrap;line-height:1.7;margin-top:5px">${basis}</dd>
    <dt>${L.modalCriteriaLabel}</dt><dd>${L.modalCriteriaText}</dd>
    <dt>${LANG_CUR==='zh'?'æ•¸æ“šä¾†æºè²æ˜':'Data Source Declaration'}</dt><dd>${L.modalSrcDecl}</dd>
  </dl>`;
  document.getElementById('modalOverlay').classList.add('open');
}
function closeModal(){ document.getElementById('modalOverlay').classList.remove('open'); }

function generateReport(){
  const{budget,cost,comp,location,segment,scores:sc,weights:wt}=S;
  const L=LANG[LANG_CUR];
  if(!budget||!sc.s){
    document.getElementById('reportContent').innerHTML='<div class="data-notice">'+L.noticeReport+'</div>';
    return;
  }
  const total=composite(sc,wt);
  const now=new Date().toLocaleDateString(LANG_CUR==='zh'?'zh-HK':'en-HK');
  const bLM={low:L.bLLow,mid:L.bLMid,high:L.bLHigh};
  const cLM={foodheavy:L.cLFoodheavy,balanced:L.cLBalanced,ambiance:L.cLAmbiance};
  const compLM={signature:L.compLSig,value:L.compLVal,luxury:L.compLLux,supply:L.compLSup};
  const locLM={community:L.locLCom,commercial:L.locLCBD};
  const segLM={mass:L.segLMass,premium:L.segLPrem};
  const verd=total>=80?L.profHigh:total>=60?L.profMid:L.profLow;
  const vc=total>=80?'var(--green-dark)':total>=60?'var(--yellow-dark)':'var(--red-dark)';

  const rows=[['s',L.scardS],['b',L.scardB],['e',L.scardE],['sub',L.scardSub],['r',L.scardR]];
  let tableRows=rows.map(([k,n])=>`<tr><td>${n}</td><td>${sc[k].toFixed(1)}</td><td>${Math.round(wt[k]*100)}%</td><td>${(sc[k]*wt[k]).toFixed(2)}</td><td>${sc[k]>=7?L.vHigh:sc[k]>=5?L.vMid:L.vLow}</td></tr>`).join('');
  let socRows=S.socLog.length?S.socLog.map(e=>`<tr><td>${e.type}</td><td style="max-width:150px">${e.question.substring(0,55)}â€¦</td><td style="max-width:150px">${e.answer.substring(0,55)}${e.answer.length>55?'â€¦':''}</td><td style="max-width:150px">${e.guidance.substring(0,55)}â€¦</td><td>${e.time}</td></tr>`).join(''):
    `<tr><td colspan="5" style="color:var(--muted);text-align:center">${L.socNoRecord}</td></tr>`;

  document.getElementById('reportContent').innerHTML=`
    <div class="report-section"><div class="report-section-title">ğŸ§‘â€ğŸ³ ${L.rpS1}</div>
      <table class="report-table"><tr><th>${L.thSetting}</th><th>${L.thValue}</th></tr>
        <tr><td>${L.lBudget}</td><td>${bLM[budget]}</td></tr>
        <tr><td>${L.lCost}</td><td>${cLM[cost]}</td></tr>
        <tr><td>${L.lComp}</td><td>${compLM[comp]}</td></tr>
        <tr><td>${L.llLoc}</td><td>${locLM[location]}</td></tr>
        <tr><td>${L.llSeg}</td><td>${segLM[segment]}</td></tr>
      </table></div>
    <div class="report-section"><div class="report-section-title">ğŸ“Š ${L.rpS2}</div>
      <table class="report-table"><tr><th>${L.thDimension}</th><th>${L.thScore}</th><th>${L.thWeight}</th><th>${L.thContrib}</th><th>${L.thIntensity}</th></tr>
        ${tableRows}
        <tr><td colspan="3"><strong>${L.profHigh.split(' ').slice(0,3).join(' ')}</strong></td><td colspan="2"><strong style="color:${vc};font-size:15px">${total} â€” ${verd}</strong></td></tr>
      </table></div>
    <div class="report-section"><div class="report-section-title">ğŸŒ ${L.rpS3}</div>
      <div class="data-card"><div class="data-card-value">${L.industrySummary}</div><div class="data-source">${L.inSumSrc}</div></div></div>
    <div class="report-section"><div class="report-section-title">âš ï¸ ${L.rpS4}</div>
      <div class="data-card" style="margin-bottom:8px"><div class="data-card-label">ğŸš† ${L.risk1Label}</div><div class="data-card-value" style="font-size:13px;font-weight:700">${L.risk1}</div><div class="data-source">${L.risk1Src}</div></div>
      <div class="data-card" style="margin-bottom:8px"><div class="data-card-label">ğŸ’¼ ${L.risk2Label}</div><div class="data-card-value" style="font-size:13px;font-weight:700">${L.risk2}</div><div class="data-source">${L.risk2Src}</div></div>
      <div class="data-card"><div class="data-card-label">ğŸ“± ${L.risk3Label}</div><div class="data-card-value" style="font-size:13px;font-weight:700">${L.risk3}</div><div class="data-source">${L.risk3Src}</div></div></div>
    <div class="report-section"><div class="report-section-title">ğŸ’¬ ${L.rpS5}</div>
      <table class="report-table"><tr><th>${L.thType}</th><th>${L.thQ}</th><th>${L.thA}</th><th>${L.thG}</th><th>${L.thTime}</th></tr>${socRows}</table></div>
    <div class="report-section"><div class="report-section-title">ğŸ“š ${L.rpS6}</div>
      <table class="report-table"><tr><th>${L.thInstitution}</th><th>${L.thDoc}</th><th>${L.thPeriod}</th></tr>
        <tr><td>C&SD</td><td>Provisional Statistics of Restaurant Receipts and Purchases</td><td>2025 Full Year</td></tr>
        <tr><td>C&SD</td><td>Consumer Price Index Monthly Reports</td><td>Dec 2025</td></tr>
        <tr><td>FEHD</td><td>Guide to PCS Licensing System</td><td>2024â€“2025</td></tr>
        <tr><td>USDA FAS</td><td>HK Food Service Annual / Retail Foods Annual</td><td>2024â€“2025</td></tr>
        <tr><td>Knight Frank</td><td>Hong Kong Retail Property Market Report Q4 2025</td><td>Q4 2025</td></tr>
        <tr><td>Fairwood Holdings</td><td>Annual Results Announcement FY2024/25</td><td>FY 2024/25</td></tr>
        <tr><td>People's Bank of China (SZ)</td><td>Shenzhen Cross-Border Consumption Statistics</td><td>2025</td></tr>
        <tr><td>LegCo Research Office</td><td>F&B Industry Challenges Research Brief</td><td>2025</td></tr>
        <tr><td>BLS / Escoffier</td><td>Restaurant Failure Rate & Labour Cost Analysis</td><td>2024â€“2025</td></tr>
        <tr><td>BBCIncorp / SCMP / China Daily</td><td>Delivery Market & Northbound Spending Reports</td><td>2024â€“2025</td></tr>
      </table>
      <div style="margin-top:8px;font-family:'DM Mono',monospace;font-size:9px;color:var(--muted)">${L.reportDate} ${now} | ${L.dataNote}</div></div>`;

  document.getElementById('halLog').innerHTML=`<div class="report-section"><div class="report-section-title">ğŸ” ${L.halTitle}</div><div class="hal-log">
    <div class="hal-entry"><div class="hal-entry-label">${L.hal1Label}</div><div class="hal-entry-text">${L.hal1}</div></div>
    <div class="hal-entry"><div class="hal-entry-label">${L.hal2Label}</div><div class="hal-entry-text">${L.hal2}</div></div>
    <div class="hal-entry"><div class="hal-entry-label">${L.hal3Label}</div><div class="hal-entry-text">${L.hal3}</div></div>
    <div class="hal-entry"><div class="hal-entry-label">${L.hal4Label}</div><div class="hal-entry-text">${L.hal4}</div></div>
    <div class="hal-entry"><div class="hal-entry-label">${L.hal5Label}</div><div class="hal-entry-text">${L.hal5}</div></div>
  </div></div>`;
}

function switchTab(name){
  document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('content-'+name).classList.add('active');
  document.getElementById('tab-'+name).classList.add('active');
}

// Init in English
applyLang();
</script>
</body>
</html>
